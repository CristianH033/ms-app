import{d as R,r as E,a0 as b,a1 as q,l as z,a2 as _,a3 as P,a4 as M,a5 as B,a6 as C,a7 as U,a8 as F,a9 as X,aa as j,ab as W,ac as V}from"./index-BFgALlmS.js";function H(t){var r;const e=_(t);return(r=e==null?void 0:e.$el)!=null?r:e}const $=V?window:void 0;function x(...t){let r,e,n,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,n,u]=t,r=$):[r,e,n,u]=t,!r)return M;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const a=[],c=()=>{a.forEach(i=>i()),a.length=0},o=(i,m,g,h)=>(i.addEventListener(m,g,h),()=>i.removeEventListener(m,g,h)),f=P(()=>[H(r),_(u)],([i,m])=>{if(c(),!i)return;const g=B(m)?{...m}:m;a.push(...e.flatMap(h=>n.map(w=>o(i,h,w,g))))},{immediate:!0,flush:"post"}),s=()=>{f(),c()};return C(s),s}const G=500,J=10;function K(t,r,e){var n,u;const a=z(()=>H(t));let c,o,f,s=!1;function i(){c&&(clearTimeout(c),c=void 0),o=void 0,f=void 0,s=!1}function m(l){var v,y,d;const[p,L,O]=[f,o,s];if(i(),!(e!=null&&e.onMouseUp)||!L||!p||(v=e==null?void 0:e.modifiers)!=null&&v.self&&l.target!==a.value)return;(y=e==null?void 0:e.modifiers)!=null&&y.prevent&&l.preventDefault(),(d=e==null?void 0:e.modifiers)!=null&&d.stop&&l.stopPropagation();const T=l.x-L.x,I=l.y-L.y,N=Math.sqrt(T*T+I*I);e.onMouseUp(l.timeStamp-p,N,O)}function g(l){var v,y,d,p;(v=e==null?void 0:e.modifiers)!=null&&v.self&&l.target!==a.value||(i(),(y=e==null?void 0:e.modifiers)!=null&&y.prevent&&l.preventDefault(),(d=e==null?void 0:e.modifiers)!=null&&d.stop&&l.stopPropagation(),o={x:l.x,y:l.y},f=l.timeStamp,c=setTimeout(()=>{s=!0,r(l)},(p=e==null?void 0:e.delay)!=null?p:G))}function h(l){var v,y,d,p;if((v=e==null?void 0:e.modifiers)!=null&&v.self&&l.target!==a.value||!o||(e==null?void 0:e.distanceThreshold)===!1)return;(y=e==null?void 0:e.modifiers)!=null&&y.prevent&&l.preventDefault(),(d=e==null?void 0:e.modifiers)!=null&&d.stop&&l.stopPropagation();const L=l.x-o.x,O=l.y-o.y;Math.sqrt(L*L+O*O)>=((p=e==null?void 0:e.distanceThreshold)!=null?p:J)&&i()}const w={capture:(n=e==null?void 0:e.modifiers)==null?void 0:n.capture,once:(u=e==null?void 0:e.modifiers)==null?void 0:u.once},D=[x(a,"pointerdown",g,w),x(a,"pointermove",h,w),x(a,["pointerup","pointerleave"],m,w)];return()=>D.forEach(l=>l())}const oe=R({name:"OnLongPress",props:["as","options"],emits:["trigger"],setup(t,{slots:r,emit:e}){const n=E();return K(n,u=>{e("trigger",u)},t.options),()=>{if(r.default)return b(t.as||"div",{ref:n},r.default())}}});function Q(t,r,e){const{immediate:n=!0,delay:u=0,onError:a=M,onSuccess:c=M,resetOnExecute:o=!0,shallow:f=!0,throwError:s}=e??{},i=f?U(r):E(r),m=E(!1),g=E(!1),h=U(void 0);async function w(l=0,...v){o&&(i.value=r),h.value=void 0,m.value=!1,g.value=!0,l>0&&await X(l);const y=typeof t=="function"?t(...v):t;try{const d=await y;i.value=d,m.value=!0,c(d)}catch(d){if(h.value=d,a(d),s)throw d}finally{g.value=!1}return i.value}n&&w(u);const D={state:i,isReady:m,isLoading:g,error:h,execute:w};function k(){return new Promise((l,v)=>{j(g).toBe(!1).then(()=>l(D)).catch(v)})}return{...D,then(l,v){return k().then(l,v)}}}async function Z(t){return new Promise((r,e)=>{const n=new Image,{src:u,srcset:a,sizes:c,class:o,loading:f,crossorigin:s,referrerPolicy:i}=t;n.src=u,a&&(n.srcset=a),c&&(n.sizes=c),o&&(n.className=o),f&&(n.loading=f),s&&(n.crossOrigin=s),i&&(n.referrerPolicy=i),n.onload=()=>r(n),n.onerror=e})}function ee(t,r={}){const e=Q(()=>Z(_(t)),void 0,{resetOnExecute:!0,...r});return P(()=>_(t),()=>e.execute(r.delay),{deep:!0}),e}const ae=R({name:"UseImage",props:["src","srcset","sizes","as","alt","class","loading","crossorigin","referrerPolicy"],setup(t,{slots:r}){const e=q(ee(t));return()=>e.isLoading&&r.loading?r.loading(e):e.error&&r.error?r.error(e.error):r.default?r.default(e):b(t.as||"img",t)}});function A(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Y(t){const r=window.getComputedStyle(t);if(r.overflowX==="scroll"||r.overflowY==="scroll"||r.overflowX==="auto"&&t.clientWidth<t.scrollWidth||r.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!e||e.tagName==="BODY"?!1:Y(e)}}function te(t){const r=t||window.event,e=r.target;return Y(e)?!1:r.touches.length>1?!0:(r.preventDefault&&r.preventDefault(),!1)}const S=new WeakMap;function re(t,r=!1){const e=E(r);let n=null,u="";P(F(t),o=>{const f=A(_(o));if(f){const s=f;if(S.get(s)||S.set(s,s.style.overflow),s.style.overflow!=="hidden"&&(u=s.style.overflow),s.style.overflow==="hidden")return e.value=!0;if(e.value)return s.style.overflow="hidden"}},{immediate:!0});const a=()=>{const o=A(_(t));!o||e.value||(W&&(n=x(o,"touchmove",f=>{te(f)},{passive:!1})),o.style.overflow="hidden",e.value=!0)},c=()=>{const o=A(_(t));!o||!e.value||(W&&(n==null||n()),o.style.overflow=u,S.delete(o),e.value=!1)};return C(c),z({get(){return e.value},set(o){o?a():c()}})}function ne(){let t=!1;const r=E(!1);return(e,n)=>{if(r.value=n.value,t)return;t=!0;const u=re(e,n.value);P(r,a=>u.value=a)}}ne();export{oe as O,ae as U};
