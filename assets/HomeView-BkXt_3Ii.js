import{e as s,_ as h,a as y}from"./RafflesList.vue_vue_type_script_setup_true_lang-BF0te2n0.js";import{d as k,r as a,l as R,p as S,q as C,s as V,o as B,c as D,a as l,n as O,b as t,e as d,w as U,_ as $}from"./index-DzBWQBNt.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-Ddd7xP5A.js";import{g as L}from"./createLucideIcon-BNtvBa0W.js";import{S as M}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-BxVJG7qs.js";import{S as N}from"./magnifer-outline-BXtTU3gn.js";import"./SelectScrollDownButton.vue_vue_type_script_setup_true_lang-C4PVsvIO.js";import"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-BMVsF4mo.js";import"./ImageInput.vue_vue_type_script_setup_true_lang-CwYGF3o_.js";import"./thumbHash-Ci89Ad7b.js";import"./ticket-line-duotone-DyTtdPwP.js";import"./user-speak-line-duotone-DdBdVXvL.js";import"./vee-validate-zod.esm-CpgVBviP.js";import"./AlertDialogCancel.vue_vue_type_script_setup_true_lang-DwLYGvUz.js";import"./LazyImg-22Ousha6.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-CQdCrKHT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardContent.vue_vue_type_script_setup_true_lang-NWf0bRet.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-Bt_wgcxN.js";const q={class:"flex w-full flex-col items-center"},A={class:"flex w-full max-w-3xl flex-col gap-4"},E={class:"relative grow"},F=l("span",{class:"hidden md:inline"},"Nueva rifa",-1),H={class:"flex w-full flex-col items-center gap-4"},I=l("div",{class:"flex w-full flex-col items-center"},null,-1),fe=k({__name:"HomeView",setup(P){const f=a(!1),m=a(!1),c=a(""),p=a([]),r=a(!1),v=a(!1),g=a(null),b=R(()=>p.value.filter(e=>e.raffle_name.toLowerCase().includes(c.value.toLowerCase())));S(g,([{isIntersecting:e}])=>{v.value=!e},{rootMargin:"-65px",threshold:1});const w=()=>{r.value=!0},_=()=>{r.value=!1},i=async()=>{_(),await u()},x=async()=>{console.log("On delete, reload raffles"),_(),await u()},u=async()=>{f.value=!0,await L().then(e=>{p.value=e}).catch(e=>{console.log(e)}).finally(()=>{f.value=!1})};return s.on("createRaffle",i),s.on("updateRaffle",i),s.on("deleteRaffle",x),C(async()=>{await u()}),V(()=>{s.off("createRaffle",i),s.off("updateRaffle",i),s.off("deleteRaffle",x)}),(e,o)=>(B(),D("div",q,[l("div",{ref_key:"sentinal",ref:g,class:"h-0 w-full"},null,512),l("div",A,[l("div",{class:O(["sticky top-16 z-10 flex flex-row gap-4 rounded-lg border bg-background-elevated/90 px-4 py-3 backdrop-blur transition-all duration-300",{"-mx-4 rounded-none border-x-0 border-t-0 !bg-background/90 @3xl/main:rounded-b-lg @3xl/main:border-x @3xl/main:!bg-background-elevated/90":v.value}])},[l("div",E,[t(d(N),{class:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2"}),t(z,{type:"text",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),autocomplete:"off",placeholder:"Buscar",class:"w-full py-2 pl-11 pr-4 text-sm"},null,8,["modelValue"])]),t(d($),{class:"gap-2",onClick:w},{default:U(()=>[t(d(M),{class:"h-5 w-5"}),F]),_:1})],2),l("div",H,[t(h,{raffles:b.value,loading:f.value},null,8,["raffles","loading"])])]),I,t(y,{open:r.value,"onUpdate:open":o[1]||(o[1]=n=>r.value=n),"is-submiting":m.value,"onUpdate:isSubmiting":o[2]||(o[2]=n=>m.value=n)},null,8,["open","is-submiting"])]))}});export{fe as default};
