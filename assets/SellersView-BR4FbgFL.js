import{c as A,b as T}from"./sellers-2xD1Se56.js";import{_ as P}from"./SellersList.vue_vue_type_script_setup_true_lang-DrROvTnc.js";import{S as D,_ as z,a as H,b as R,c as Z,d as G}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-ChD8eHFR.js";import{c as K,_ as O}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-CIIGZnoH.js";import{d as L,a9 as Q,o as r,j as X,e,ab as W,n as Y,C as J,r as h,l as ee,q,Q as le,c as p,a as y,b as l,w as a,O as b,B as F,S as v,t as ae,M as se,_ as E,U as oe,V as te}from"./index-B4iZ3EM6.js";import{t as ne,z as g,u as re,_ as x,a as w,b as S,c as $,F as C}from"./vee-validate-zod.esm-BTr_lng6.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-Dj58SJsf.js";import{u as ie,_ as ue}from"./ImageInput.vue_vue_type_script_setup_true_lang-BOi4KGzf.js";import"./magnifer-outline-bU4cWGyy.js";import"./strings-BzWVocVB.js";import"./thumbHash-Ci89Ad7b.js";const de=L({__name:"PhoneInput",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(V,{emit:_}){const f=V,m=Q(f,"modelValue",_,{passive:!0,defaultValue:f.defaultValue});return(u,s)=>(r(),X(e(K),{unmasked:e(m),"onUpdate:unmasked":s[0]||(s[0]=d=>W(m)?m.value=d:null),type:"text",mask:"000-000-00-00",placeholder:"3XX-XXX-XX-XX",class:Y(e(J)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-right text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",f.class)),inputmode:"numeric"},null,8,["unmasked","class"]))}}),me=["disabled"],fe={style:{position:"relative"}},ce={key:0,role:"alert",id:"radix-136-form-item-message",class:"text-sm font-medium text-destructive",type:"error"},pe=1,_e=5e6,ve=L({__name:"SellerForm",emits:["submit","cancel","success","error"],setup(V,{emit:_}){const f=["image/jpeg","image/jpg","image/png","image/webp"],i=_,m=h(!1),u=ee(()=>m.value),s=h(null),d=h(null),I=ne(g.object({name:g.string({required_error:"El nombre es requerido"}).transform(o=>o.toLocaleLowerCase()),email:g.string().email({message:"Email invalido"}).optional().or(g.literal("")),phone:g.string({required_error:"El teléfono es requerido"}).refine(o=>o.length===10,{message:"El teléfono debe tener 10 dígitos"}),photo:g.instanceof(File).refine(o=>o instanceof File,{message:"Debe seleccionar una imagen"}).refine(o=>f.includes(o.type),{message:"Tipo de archivo no aceptado"}).refine(o=>o.size>=pe,{message:"El archivo está vacío"}).refine(o=>o.size<=_e,{message:"El archivo es demasiado grande"}).optional()})),{handleSubmit:B}=re({validationSchema:I,initialValues:{}}),U=()=>{i("cancel")},N=B(async o=>{i("submit"),console.log(o),m.value=!0;const t={name:o.name,email:o.email||null,phone:o.phone,avatar_url:null,thumb_hash:null};o.photo&&await ie(o.photo,o.photo.name,"avatars").then(n=>{console.log(n),t.avatar_url=n==null?void 0:n.fullPath,t.thumb_hash=s.value}).catch(n=>{console.error(n)}),A(t).then(n=>{i("success"),console.log(n)}).catch(n=>{i("error"),console.error(n),d.value=n.message}).finally(()=>{m.value=!1})},({errors:o})=>{console.log(o)});return q(async()=>{}),(o,t)=>{const n=le("auto-animate");return r(),p("form",{onSubmit:t[1]||(t[1]=te((...c)=>e(N)&&e(N)(...c),["prevent"]))},[y("fieldset",{disabled:u.value},[l(e(C),{name:"name"},{default:a(({componentField:c})=>[l(e(x),null,{default:a(()=>[l(e(w),null,{default:a(()=>t[2]||(t[2]=[b("Nombre")])),_:1}),l(e(S),null,{default:a(()=>[l(e(M),F({type:"text",placeholder:"Nombre del vendedor"},c,{required:""}),null,16)]),_:2},1024),v((r(),p("div",null,[l(e($))])),[[n]])]),_:2},1024)]),_:1}),l(e(C),{name:"email"},{default:a(({componentField:c})=>[l(e(x),null,{default:a(()=>[l(e(w),null,{default:a(()=>t[3]||(t[3]=[b("E-mail")])),_:1}),l(e(S),null,{default:a(()=>[l(e(M),F({type:"email",placeholder:"mail@example.com"},c),null,16)]),_:2},1024),v((r(),p("div",null,[l(e($))])),[[n]])]),_:2},1024)]),_:1}),l(e(C),{name:"phone"},{default:a(({value:c,handleChange:k})=>[l(e(x),null,{default:a(()=>[l(e(w),null,{default:a(()=>t[4]||(t[4]=[b("Numero de contacto")])),_:1}),l(e(S),null,{default:a(()=>[l(de,{"model-value":c,"onUpdate:modelValue":j=>k(j,!0),required:""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),v((r(),p("div",null,[l(e($))])),[[n]])]),_:2},1024)]),_:1}),l(e(C),{name:"photo"},{default:a(({componentField:c})=>[l(e(x),null,{default:a(()=>[l(e(w),null,{default:a(()=>t[5]||(t[5]=[b("Foto de perfil")])),_:1}),l(e(S),null,{default:a(()=>[l(ue,F(c,{base64ThumbHash:s.value,"onUpdate:base64ThumbHash":t[0]||(t[0]=k=>s.value=k)}),null,16,["base64ThumbHash"])]),_:2},1024),v((r(),p("div",null,[l(e($))])),[[n]])]),_:2},1024)]),_:1}),v((r(),p("div",fe,[d.value!==null?(r(),p("p",ce,ae(d.value),1)):se("",!0)])),[[n]]),l(e(x),{class:"flex w-full flex-col-reverse items-center justify-end gap-2 space-y-0 py-2 md:flex-row"},{default:a(()=>[l(e(E),{type:"button",class:"w-full gap-2",variant:"outline",onClick:U},{default:a(()=>t[6]||(t[6]=[y("span",null,"Cancelar",-1)])),_:1}),l(e(E),{type:"submit",class:"w-full gap-2"},{default:a(()=>[v((r(),p("div",null,[m.value?(r(),X(e(oe),{key:0,class:"h-6 w-6"})):(r(),X(e(D),{key:1,class:"h-6 w-6"}))])),[[n]]),t[7]||(t[7]=y("span",null,"Crear",-1))]),_:1})]),_:1})],8,me)],32)}}}),ge={class:"flex w-full flex-col items-center"},be={class:"grid gap-4 py-4"},De=L({__name:"SellersView",setup(V){const _=h(!1),f=h([]),i=h(!1),m=()=>{i.value=!1,T().then(u=>{f.value=u}).catch(u=>{console.log(u)})};return q(async()=>{_.value=!0,T().then(u=>{f.value=u}).catch(u=>{console.log(u)}).finally(()=>{_.value=!1})}),(u,s)=>(r(),p("div",ge,[l(P,{sellers:f.value,isLoading:_.value},{actionButton:a(()=>[l(e(z),{open:i.value,"onUpdate:open":s[2]||(s[2]=d=>i.value=d)},{default:a(()=>[l(e(O),{"as-child":""},{default:a(()=>[l(e(E),{class:"gap-2"},{default:a(()=>[l(e(D),{class:"h-5 w-5"}),s[4]||(s[4]=y("span",{class:"hidden md:inline"},"Nuevo vendedor",-1))]),_:1})]),_:1}),l(e(H),{onEscapeKeyDown:s[1]||(s[1]=d=>d.preventDefault())},{default:a(()=>[l(e(R),null,{default:a(()=>[l(e(Z),null,{default:a(()=>s[5]||(s[5]=[b("Crear nuevo vendedor")])),_:1}),l(e(G),null,{default:a(()=>s[6]||(s[6]=[b(" Crea un nuevo vendedor ")])),_:1})]),_:1}),y("div",be,[l(ve,{onSuccess:m,onCancel:s[0]||(s[0]=d=>i.value=!1)})])]),_:1})]),_:1},8,["open"])]),actionForEmpty:a(()=>[l(e(E),{class:"gap-2",onClick:s[3]||(s[3]=d=>i.value=!0)},{default:a(()=>[l(e(D),{class:"h-5 w-5"}),s[7]||(s[7]=y("span",null,"Crear vendedor",-1))]),_:1})]),_:1},8,["sellers","isLoading"])]))}});export{De as default};
