import{o as X,c as Y,a as E,d as ie,am as le,r as oe,an as ue,aj as de,q as me,y as fe,n as he,e as ne,E as pe,v as be,b as ge,Q as _e,V as se}from"./index-Cp5NQWbQ.js";const ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ye=E("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[E("circle",{cx:"12",cy:"12",r:"10",opacity:".5"}),E("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})],-1),xe=[ye];function Ue(e,t){return X(),Y("svg",ve,[...xe])}const Te={name:"solar-close-circle-line-duotone",render:Ue};function we(e,t,l){if(e>100||t>100)throw new Error(`${e}x${t} doesn't fit in 100x100`);let{PI:a,round:n,max:r,cos:g,abs:m}=Math,_=0,y=0,u=0,c=0;for(let p=0,f=0;p<e*t;p++,f+=4){let d=l[f+3]/255;_+=d/255*l[f],y+=d/255*l[f+1],u+=d/255*l[f+2],c+=d}c&&(_/=c,y/=c,u/=c);let s=c<e*t,L=s?5:7,O=r(1,n(L*e/r(e,t))),P=r(1,n(L*t/r(e,t))),A=[],C=[],z=[],G=[];for(let p=0,f=0;p<e*t;p++,f+=4){let d=l[f+3]/255,B=_*(1-d)+d/255*l[f],o=y*(1-d)+d/255*l[f+1],i=u*(1-d)+d/255*l[f+2];A[p]=(B+o+i)/3,C[p]=(B+o)/2-i,z[p]=B-o,G[p]=d}let q=(p,f,d)=>{let B=0,o=[],i=0,v=[];for(let b=0;b<d;b++)for(let j=0;j*d<f*(d-b);j++){let N=0;for(let H=0;H<e;H++)v[H]=g(a/e*j*(H+.5));for(let H=0;H<t;H++)for(let K=0,ce=g(a/t*b*(H+.5));K<e;K++)N+=p[K+H*e]*v[K]*ce;N/=e*t,j||b?(o.push(N),i=r(i,m(N))):B=N}if(i)for(let b=0;b<o.length;b++)o[b]=.5+.5/i*o[b];return[B,o,i]},[Q,k,Z]=q(A,r(3,O),r(3,P)),[ee,J,te]=q(C,3,3),[M,I,S]=q(z,3,3),[D,F,$]=s?q(G,5,5):[],V=e>t,x=n(63*Q)|n(31.5+31.5*ee)<<6|n(31.5+31.5*M)<<12|n(31*Z)<<18|s<<23,R=(V?P:O)|n(63*te)<<3|n(63*S)<<9|V<<15,U=[x&255,x>>8&255,x>>16,R&255,R>>8],T=s?6:5,w=0;s&&U.push(n(15*D)|n(15*$)<<4);for(let p of s?[k,J,I,F]:[k,J,I])for(let f of p)U[T+(w>>1)]|=n(15*f)<<((w++&1)<<2);return new Uint8Array(U)}function He(e){let{PI:t,min:l,max:a,cos:n,round:r}=Math,g=e[0]|e[1]<<8|e[2]<<16,m=e[3]|e[4]<<8,_=(g&63)/63,y=(g>>6&63)/31.5-1,u=(g>>12&63)/31.5-1,c=(g>>18&31)/31,s=g>>23,L=(m>>3&63)/63,O=(m>>9&63)/63,P=m>>15,A=a(3,P?s?5:7:m&7),C=a(3,P?m&7:s?5:7),z=s?(e[5]&15)/15:1,G=(e[5]>>4)/15,q=s?6:5,Q=0,k=(V,x,R)=>{let U=[];for(let T=0;T<x;T++)for(let w=T?0:1;w*x<V*(x-T);w++)U.push(((e[q+(Q>>1)]>>((Q++&1)<<2)&15)/7.5-1)*R);return U},Z=k(A,C,c),ee=k(3,3,L*1.25),J=k(3,3,O*1.25),te=s&&k(5,5,G),M=Ce(e),I=r(M>1?32:32*M),S=r(M>1?32/M:32),D=new Uint8Array(I*S*4),F=[],$=[];for(let V=0,x=0;V<S;V++)for(let R=0;R<I;R++,x+=4){let U=_,T=y,w=u,p=z;for(let o=0,i=a(A,s?5:3);o<i;o++)F[o]=n(t/I*(R+.5)*o);for(let o=0,i=a(C,s?5:3);o<i;o++)$[o]=n(t/S*(V+.5)*o);for(let o=0,i=0;o<C;o++)for(let v=o?0:1,b=$[o]*2;v*C<A*(C-o);v++,i++)U+=Z[i]*F[v]*b;for(let o=0,i=0;o<3;o++)for(let v=o?0:1,b=$[o]*2;v<3-o;v++,i++){let j=F[v]*b;T+=ee[i]*j,w+=J[i]*j}if(s)for(let o=0,i=0;o<5;o++)for(let v=o?0:1,b=$[o]*2;v<5-o;v++,i++)p+=te[i]*F[v]*b;let f=U-2/3*T,d=(3*U-f+w)/2,B=d-w;D[x]=a(0,255*l(1,d)),D[x+1]=a(0,255*l(1,B)),D[x+2]=a(0,255*l(1,f)),D[x+3]=a(0,255*l(1,p))}return{w:I,h:S,rgba:D}}function Ce(e){let t=e[3],l=e[2]&128,a=e[4]&128,n=a?l?5:7:t&7,r=a?t&7:l?5:7;return n/r}function Ve(e,t,l){let a=e*4+1,n=6+t*(5+a),r=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,e&255,0,0,t>>8,t&255,8,6,0,0,0,0,0,0,0,n>>>24,n>>16&255,n>>8&255,n&255,73,68,65,84,120,1],g=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],m=1,_=0;for(let y=0,u=0,c=a-1;y<t;y++,c+=a-1)for(r.push(y+1<t?0:1,a&255,a>>8,~a&255,a>>8^255,0),_=(_+m)%65521;u<c;u++){let s=l[u]&255;r.push(s),m=(m+s)%65521,_=(_+m)%65521}r.push(_>>8,_&255,m>>8,m&255,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[y,u]of[[12,29],[37,41+n]]){let c=-1;for(let s=y;s<u;s++)c^=r[s],c=c>>>4^g[c&15],c=c>>>4^g[c&15];c=~c,r[u++]=c>>>24,r[u++]=c>>16&255,r[u++]=c>>8&255,r[u++]=c&255}return"data:image/png;base64,"+btoa(String.fromCharCode(...r))}function Re(e){let t=He(e);return Ve(t.w,t.h,t.rgba)}const Be=async e=>{const t=new Image;t.src=URL.createObjectURL(e),await new Promise(m=>{t.onload=m});const l=document.createElement("canvas"),a=l.getContext("2d"),n=100/Math.max(t.width,t.height);l.width=Math.round(t.width*n)||100,l.height=Math.round(t.height*n)||100,a==null||a.drawImage(t,0,0,l.width,l.height);const r=a==null?void 0:a.getImageData(0,0,l.width,l.height),g=we(r.width,r.height,r.data);return URL.revokeObjectURL(t.src),l.remove(),g},Le=e=>btoa(String.fromCharCode(...e)),ke=e=>new Uint8Array(atob(e).split("").map(t=>t.charCodeAt(0))),Ie=e=>ke(e),De=async e=>{const t=await Be(e);return await Le(t)},Ne=e=>Re(Ie(e)),je={key:0,class:"relative p-3 border w-full h-full rounded-md rounded-b-none border-b-0 overflow-hidden"},Ae=["src"],qe=["name"],Oe=ie({__name:"ImageInput",props:le({defaultValue:{},modelValue:{},class:{},name:{},accept:{}},{base64ThumbHash:{required:!1},base64ThumbHashModifiers:{}}),emits:le(["update:modelValue"],["update:base64ThumbHash"]),setup(e,{emit:t}){const l=oe(null),a=oe(null),n=e,r=ue(e,"base64ThumbHash"),m=de(n,"modelValue",t,{passive:!0,defaultValue:n.defaultValue}),_=async u=>{var L;const s=(L=u.target.files)==null?void 0:L[0];s?(l.value=URL.createObjectURL(s),r.value=await De(s)):r.value=null},y=()=>{l.value=null,m.value="",r.value=null,a.value&&(a.value.files=null,a.value.value="")};return(u,c)=>{const s=me("auto-animate");return X(),Y("div",null,[fe(u.$slots,"preview",{},()=>[be((X(),Y("div",null,[l.value?(X(),Y("div",je,[E("button",{type:"button",onClick:y,class:"border rounded-full p-1 bg-background-elevated/50 backdrop-blur absolute right-1 top-1"},[ge(ne(Te),{class:"w-5 h-5"})]),E("img",{src:l.value,class:"object-cover rounded-3xs border min-h-32 max-h-32"},null,8,Ae)])):_e("",!0)])),[[s]])]),E("input",{class:he(ne(pe)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l.value?"rounded-t-none":"rounded-md",n.class)),name:n.name,type:"file",accept:"image/*",onChange:_,ref_key:"input",ref:a},null,42,qe)])}}});var h=[];for(var ae=0;ae<256;++ae)h.push((ae+256).toString(16).slice(1));function Me(e,t=0){return(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase()}var W,Se=new Uint8Array(16);function Fe(){if(!W&&(W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(Se)}var $e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const re={randomUUID:$e};function Ee(e,t,l){if(re.randomUUID&&!t&&!e)return re.randomUUID();e=e||{};var a=e.random||(e.rng||Fe)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Me(a)}const ze=async(e,t)=>{t=Ee().slice(-10)+"-"+t;const{data:a,error:n}=await se.storage.from("raffles").upload(t,e,{cacheControl:"3600",upsert:!1});return n&&console.log(n),a},Ge=async e=>{const{data:t,error:l}=await se.storage.from("raffles").createSignedUrl(e,31536e4);return l&&console.log(l),t};export{Oe as _,Ne as b,Ge as g,ze as u,Ee as v};
