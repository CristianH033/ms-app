import{o as i,c as d,a as s,d as V,a8 as v,r as h,a9 as U,p as k,a1 as C,l as D,n as I,e as g,m as T,q as H,b as R,ac as B,s as S}from"./index-d92Zl69x.js";import{f as L}from"./thumbHash-Ci89Ad7b.js";const M={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$=s("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("circle",{cx:"12",cy:"12",r:"10",opacity:".5"}),s("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})],-1),j=[$];function N(e,a){return i(),d("svg",M,[...j])}const q={name:"solar-close-circle-line-duotone",render:N},E={key:0,class:"relative p-3 border w-full h-full rounded-md rounded-b-none border-b-0 overflow-hidden"},F=["src"],z=["name"],X=V({__name:"ImageInput",props:v({defaultValue:{},modelValue:{},class:{},name:{},accept:{}},{base64ThumbHash:{required:!1},base64ThumbHashModifiers:{}}),emits:v(["update:modelValue"],["update:base64ThumbHash"]),setup(e,{emit:a}){const t=h(null),n=h(null),l=e,c=U(e,"base64ThumbHash"),y=k(l,"modelValue",a,{passive:!0,defaultValue:l.defaultValue}),_=async m=>{var b;const r=(b=m.target.files)==null?void 0:b[0];r?(t.value=URL.createObjectURL(r),c.value=await L(r)):c.value=null},w=()=>{t.value=null,y.value="",c.value=null,n.value&&(n.value.files=null,n.value.value="")};return(m,x)=>{const r=C("auto-animate");return i(),d("div",null,[D(m.$slots,"preview",{},()=>[H((i(),d("div",null,[t.value?(i(),d("div",E,[s("button",{type:"button",onClick:w,class:"border rounded-full p-1 bg-background-elevated/50 backdrop-blur absolute right-1 top-1"},[R(g(q),{class:"w-5 h-5"})]),s("img",{src:t.value,class:"object-cover rounded-3xs border min-h-32 max-h-32"},null,8,F)])):B("",!0)])),[[r]])]),s("input",{class:I(g(T)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t.value?"rounded-t-none":"rounded-md",l.class)),name:l.name,type:"file",accept:"image/*",onChange:_,ref_key:"input",ref:n},null,42,z)])}}});var o=[];for(var p=0;p<256;++p)o.push((p+256).toString(16).slice(1));function A(e,a=0){return(o[e[a+0]]+o[e[a+1]]+o[e[a+2]]+o[e[a+3]]+"-"+o[e[a+4]]+o[e[a+5]]+"-"+o[e[a+6]]+o[e[a+7]]+"-"+o[e[a+8]]+o[e[a+9]]+"-"+o[e[a+10]]+o[e[a+11]]+o[e[a+12]]+o[e[a+13]]+o[e[a+14]]+o[e[a+15]]).toLowerCase()}var u,O=new Uint8Array(16);function P(){if(!u&&(u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(O)}var G=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const f={randomUUID:G};function J(e,a,t){if(f.randomUUID&&!a&&!e)return f.randomUUID();e=e||{};var n=e.random||(e.rng||P)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,A(n)}const Y=async(e,a)=>{a=J().slice(-10)+"-"+a;const{data:n,error:l}=await S.storage.from("raffles").upload(a,e,{cacheControl:"3600",upsert:!1});return l&&console.log(l),n};export{X as _,Y as u,J as v};
