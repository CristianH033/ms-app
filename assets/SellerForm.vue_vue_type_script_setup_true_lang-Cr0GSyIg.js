import{d as q,ai as z,o as t,j as w,e,ak as A,n as B,E as L,r as V,l as U,p as H,q as R,c as u,a as F,b as l,w as s,s as g,D as k,v as d,t as Z,Q as G,_ as T,S as Q,ap as X}from"./index-CUhxv6Jf.js";import{t as Y,z as c,u as J,_ as h,a as b,b as v,c as y,F as x}from"./FormMessage.vue_vue_type_script_setup_true_lang-PVxMqvpA.js";import{c as K}from"./component-BDm2T8bZ.js";import{S as O}from"./add-circle-line-duotone-t6VpUcYn.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-ChWTV_R9.js";import{u as W,_ as ee}from"./storage-CnIA73IT.js";import{d as le}from"./sellers-DoPf5WTU.js";const ae=q({__name:"PhoneInput",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(C,{emit:E}){const f=C,i=z(f,"modelValue",E,{passive:!0,defaultValue:f.defaultValue});return(D,m)=>(t(),w(e(K),{unmasked:e(i),"onUpdate:unmasked":m[0]||(m[0]=_=>A(i)?i.value=_:null),type:"text",mask:"000-000-00-00",placeholder:"312-345-67-89",class:B(e(L)("text-right flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",f.class)),inputmode:"numeric"},null,8,["unmasked","class"]))}}),se=["disabled"],oe={style:{position:"relative"}},te={key:0,role:"alert",id:"radix-136-form-item-message",class:"text-sm font-medium text-destructive",type:"error"},ne=F("span",null,"Cancelar",-1),ie=F("span",null,"Crear",-1),re=1,ue=5e6,ge=q({__name:"SellerForm",emits:["submit","cancel","success","error"],setup(C,{emit:E}){const f=["image/jpeg","image/jpg","image/png","image/webp"],p=E,i=V(!1),D=U(()=>i.value),m=V(null),_=V(null),I=Y(c.object({name:c.string({required_error:"El nombre es requerido"}),email:c.string().email({message:"Email invalido"}).optional().or(c.literal("")),phone:c.string({required_error:"El teléfono es requerido"}).refine(a=>a.length===10,{message:"El teléfono debe tener 10 dígitos"}),photo:c.instanceof(File).refine(a=>a instanceof File,{message:"Debe seleccionar una imagen"}).refine(a=>f.includes(a.type),{message:"Tipo de archivo no aceptado"}).refine(a=>a.size>=re,{message:"El archivo está vacío"}).refine(a=>a.size<=ue,{message:"El archivo es demasiado grande"}).optional()})),{handleSubmit:M}=J({validationSchema:I,initialValues:{}}),j=()=>{p("cancel")},N=M(async a=>{p("submit"),console.log(a),i.value=!0;const r={name:a.name,email:a.email||null,phone:a.phone,avatar_url:null,thumb_hash:null};a.photo&&await W(a.photo,a.photo.name).then(o=>{console.log(o),r.avatar_url=o==null?void 0:o.fullPath,r.thumb_hash=m.value}).catch(o=>{console.error(o)}),le(r).then(o=>{p("success"),console.log(o)}).catch(o=>{p("error"),console.error(o),_.value=o.message}).finally(()=>{i.value=!1})},({errors:a})=>{console.log(a)});return H(async()=>{}),(a,r)=>{const o=R("auto-animate");return t(),u("form",{onSubmit:r[1]||(r[1]=X((...n)=>e(N)&&e(N)(...n),["prevent"]))},[F("fieldset",{disabled:D.value},[l(e(x),{name:"name"},{default:s(({componentField:n})=>[l(e(h),null,{default:s(()=>[l(e(b),null,{default:s(()=>[g("Nombre")]),_:1}),l(e(v),null,{default:s(()=>[l(e($),k({type:"text",placeholder:"Nombre del vendedor"},n,{required:""}),null,16)]),_:2},1024),d((t(),u("div",null,[l(e(y))])),[[o]])]),_:2},1024)]),_:1}),l(e(x),{name:"email"},{default:s(({componentField:n})=>[l(e(h),null,{default:s(()=>[l(e(b),null,{default:s(()=>[g("E-mail")]),_:1}),l(e(v),null,{default:s(()=>[l(e($),k({type:"email",placeholder:"mail@example.com"},n),null,16)]),_:2},1024),d((t(),u("div",null,[l(e(y))])),[[o]])]),_:2},1024)]),_:1}),l(e(x),{name:"phone"},{default:s(({value:n,handleChange:S})=>[l(e(h),null,{default:s(()=>[l(e(b),null,{default:s(()=>[g("Numero de contacto")]),_:1}),l(e(v),null,{default:s(()=>[l(ae,{"model-value":n,"onUpdate:modelValue":P=>S(P,!0),required:""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),d((t(),u("div",null,[l(e(y))])),[[o]])]),_:2},1024)]),_:1}),l(e(x),{name:"photo"},{default:s(({componentField:n})=>[l(e(h),null,{default:s(()=>[l(e(b),null,{default:s(()=>[g("Foto de perfil")]),_:1}),l(e(v),null,{default:s(()=>[l(ee,k(n,{base64ThumbHash:m.value,"onUpdate:base64ThumbHash":r[0]||(r[0]=S=>m.value=S)}),null,16,["base64ThumbHash"])]),_:2},1024),d((t(),u("div",null,[l(e(y))])),[[o]])]),_:2},1024)]),_:1}),d((t(),u("div",oe,[_.value!==null?(t(),u("p",te,Z(_.value),1)):G("",!0)])),[[o]]),l(e(h),{class:"space-y-0 w-full py-2 flex flex-col-reverse md:flex-row items-center justify-end gap-2"},{default:s(()=>[l(e(T),{type:"button",class:"w-full gap-2",variant:"outline",onClick:j},{default:s(()=>[ne]),_:1}),l(e(T),{type:"submit",class:"w-full gap-2"},{default:s(()=>[d((t(),u("div",null,[i.value?(t(),w(e(Q),{key:0,class:"h-6 w-6"})):(t(),w(e(O),{key:1,class:"w-6 h-6"}))])),[[o]]),ie]),_:1})]),_:1})],8,se)],32)}}});export{ge as _};
