import{o as X,c as Y,a as F,d as ce,ar as le,r as oe,as as ie,ap as ue,q as de,y as me,n as he,e as ne,E as fe,v as pe,b as be,Q as ge}from"./index-YYdFRp64.js";const _e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ve=F("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[F("circle",{cx:"12",cy:"12",r:"10",opacity:".5"}),F("path",{"stroke-linecap":"round",d:"m14.5 9.5l-5 5m0-5l5 5"})],-1),ye=[ve];function xe(e,t){return X(),Y("svg",_e,[...ye])}const Te={name:"solar-close-circle-line-duotone",render:xe};function Ue(e,t,o){if(e>100||t>100)throw new Error(`${e}x${t} doesn't fit in 100x100`);let{PI:a,round:n,max:r,cos:g,abs:m}=Math,_=0,y=0,u=0,c=0;for(let p=0,h=0;p<e*t;p++,h+=4){let d=o[h+3]/255;_+=d/255*o[h],y+=d/255*o[h+1],u+=d/255*o[h+2],c+=d}c&&(_/=c,y/=c,u/=c);let s=c<e*t,L=s?5:7,O=r(1,n(L*e/r(e,t))),P=r(1,n(L*t/r(e,t))),j=[],C=[],z=[],G=[];for(let p=0,h=0;p<e*t;p++,h+=4){let d=o[h+3]/255,B=_*(1-d)+d/255*o[h],l=y*(1-d)+d/255*o[h+1],i=u*(1-d)+d/255*o[h+2];j[p]=(B+l+i)/3,C[p]=(B+l)/2-i,z[p]=B-l,G[p]=d}let q=(p,h,d)=>{let B=0,l=[],i=0,v=[];for(let b=0;b<d;b++)for(let A=0;A*d<h*(d-b);A++){let N=0;for(let H=0;H<e;H++)v[H]=g(a/e*A*(H+.5));for(let H=0;H<t;H++)for(let K=0,se=g(a/t*b*(H+.5));K<e;K++)N+=p[K+H*e]*v[K]*se;N/=e*t,A||b?(l.push(N),i=r(i,m(N))):B=N}if(i)for(let b=0;b<l.length;b++)l[b]=.5+.5/i*l[b];return[B,l,i]},[Q,k,Z]=q(j,r(3,O),r(3,P)),[ee,J,te]=q(C,3,3),[M,I,S]=q(z,3,3),[D,$,E]=s?q(G,5,5):[],R=e>t,x=n(63*Q)|n(31.5+31.5*ee)<<6|n(31.5+31.5*M)<<12|n(31*Z)<<18|s<<23,V=(R?P:O)|n(63*te)<<3|n(63*S)<<9|R<<15,T=[x&255,x>>8&255,x>>16,V&255,V>>8],U=s?6:5,w=0;s&&T.push(n(15*D)|n(15*E)<<4);for(let p of s?[k,J,I,$]:[k,J,I])for(let h of p)T[U+(w>>1)]|=n(15*h)<<((w++&1)<<2);return new Uint8Array(T)}function we(e){let{PI:t,min:o,max:a,cos:n,round:r}=Math,g=e[0]|e[1]<<8|e[2]<<16,m=e[3]|e[4]<<8,_=(g&63)/63,y=(g>>6&63)/31.5-1,u=(g>>12&63)/31.5-1,c=(g>>18&31)/31,s=g>>23,L=(m>>3&63)/63,O=(m>>9&63)/63,P=m>>15,j=a(3,P?s?5:7:m&7),C=a(3,P?m&7:s?5:7),z=s?(e[5]&15)/15:1,G=(e[5]>>4)/15,q=s?6:5,Q=0,k=(R,x,V)=>{let T=[];for(let U=0;U<x;U++)for(let w=U?0:1;w*x<R*(x-U);w++)T.push(((e[q+(Q>>1)]>>((Q++&1)<<2)&15)/7.5-1)*V);return T},Z=k(j,C,c),ee=k(3,3,L*1.25),J=k(3,3,O*1.25),te=s&&k(5,5,G),M=He(e),I=r(M>1?32:32*M),S=r(M>1?32/M:32),D=new Uint8Array(I*S*4),$=[],E=[];for(let R=0,x=0;R<S;R++)for(let V=0;V<I;V++,x+=4){let T=_,U=y,w=u,p=z;for(let l=0,i=a(j,s?5:3);l<i;l++)$[l]=n(t/I*(V+.5)*l);for(let l=0,i=a(C,s?5:3);l<i;l++)E[l]=n(t/S*(R+.5)*l);for(let l=0,i=0;l<C;l++)for(let v=l?0:1,b=E[l]*2;v*C<j*(C-l);v++,i++)T+=Z[i]*$[v]*b;for(let l=0,i=0;l<3;l++)for(let v=l?0:1,b=E[l]*2;v<3-l;v++,i++){let A=$[v]*b;U+=ee[i]*A,w+=J[i]*A}if(s)for(let l=0,i=0;l<5;l++)for(let v=l?0:1,b=E[l]*2;v<5-l;v++,i++)p+=te[i]*$[v]*b;let h=T-2/3*U,d=(3*T-h+w)/2,B=d-w;D[x]=a(0,255*o(1,d)),D[x+1]=a(0,255*o(1,B)),D[x+2]=a(0,255*o(1,h)),D[x+3]=a(0,255*o(1,p))}return{w:I,h:S,rgba:D}}function He(e){let t=e[3],o=e[2]&128,a=e[4]&128,n=a?o?5:7:t&7,r=a?t&7:o?5:7;return n/r}function Ce(e,t,o){let a=e*4+1,n=6+t*(5+a),r=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,e&255,0,0,t>>8,t&255,8,6,0,0,0,0,0,0,0,n>>>24,n>>16&255,n>>8&255,n&255,73,68,65,84,120,1],g=[0,498536548,997073096,651767980,1994146192,1802195444,1303535960,1342533948,-306674912,-267414716,-690576408,-882789492,-1687895376,-2032938284,-1609899400,-1111625188],m=1,_=0;for(let y=0,u=0,c=a-1;y<t;y++,c+=a-1)for(r.push(y+1<t?0:1,a&255,a>>8,~a&255,a>>8^255,0),_=(_+m)%65521;u<c;u++){let s=o[u]&255;r.push(s),m=(m+s)%65521,_=(_+m)%65521}r.push(_>>8,_&255,m>>8,m&255,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130);for(let[y,u]of[[12,29],[37,41+n]]){let c=-1;for(let s=y;s<u;s++)c^=r[s],c=c>>>4^g[c&15],c=c>>>4^g[c&15];c=~c,r[u++]=c>>>24,r[u++]=c>>16&255,r[u++]=c>>8&255,r[u++]=c&255}return"data:image/png;base64,"+btoa(String.fromCharCode(...r))}function Re(e){let t=we(e);return Ce(t.w,t.h,t.rgba)}const Ve=async e=>{const t=new Image;t.src=URL.createObjectURL(e),await new Promise(m=>{t.onload=m});const o=document.createElement("canvas"),a=o.getContext("2d"),n=100/Math.max(t.width,t.height);o.width=Math.round(t.width*n)||100,o.height=Math.round(t.height*n)||100,a==null||a.drawImage(t,0,0,o.width,o.height);const r=a==null?void 0:a.getImageData(0,0,o.width,o.height),g=Ue(r.width,r.height,r.data);return URL.revokeObjectURL(t.src),o.remove(),g},Be=e=>btoa(String.fromCharCode(...e)),Le=e=>new Uint8Array(atob(e).split("").map(t=>t.charCodeAt(0))),ke=e=>Le(e),Ie=async e=>{const t=await Ve(e);return await Be(t)},Fe=e=>Re(ke(e)),De={key:0,class:"relative p-3 border w-full h-full rounded-md rounded-b-none border-b-0 overflow-hidden"},Ae=["src"],je=["name"],Pe=ce({__name:"ImageInput",props:le({defaultValue:{},modelValue:{},class:{},name:{},accept:{}},{base64ThumbHash:{required:!1},base64ThumbHashModifiers:{}}),emits:le(["update:modelValue"],["update:base64ThumbHash"]),setup(e,{emit:t}){const o=oe(null),a=oe(null),n=e,r=ie(e,"base64ThumbHash"),m=ue(n,"modelValue",t,{passive:!0,defaultValue:n.defaultValue}),_=async u=>{var L;const s=(L=u.target.files)==null?void 0:L[0];s?(o.value=URL.createObjectURL(s),r.value=await Ie(s)):r.value=null},y=()=>{o.value=null,m.value="",r.value=null,a.value&&(a.value.files=null,a.value.value="")};return(u,c)=>{const s=de("auto-animate");return X(),Y("div",null,[me(u.$slots,"preview",{},()=>[pe((X(),Y("div",null,[o.value?(X(),Y("div",De,[F("button",{type:"button",onClick:y,class:"border rounded-full p-1 bg-background-elevated/50 backdrop-blur absolute right-1 top-1"},[be(ne(Te),{class:"w-5 h-5"})]),F("img",{src:o.value,class:"object-cover rounded-3xs border min-h-32 max-h-32"},null,8,Ae)])):ge("",!0)])),[[s]])]),F("input",{class:he(ne(fe)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o.value?"rounded-t-none":"rounded-md",n.class)),name:n.name,type:"file",accept:"image/*",onChange:_,ref_key:"input",ref:a},null,42,je)])}}});var f=[];for(var ae=0;ae<256;++ae)f.push((ae+256).toString(16).slice(1));function qe(e,t=0){return(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase()}var W,Me=new Uint8Array(16);function Se(){if(!W&&(W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(Me)}var $e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const re={randomUUID:$e};function Ne(e,t,o){if(re.randomUUID&&!t&&!e)return re.randomUUID();e=e||{};var a=e.random||(e.rng||Se)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,qe(a)}export{Pe as _,Fe as b,Ne as v};
