import{c as U,b as q}from"./sellers-YbArgFJR.js";import{_ as z}from"./SellersList.vue_vue_type_script_setup_true_lang-CzmWpMx_.js";import{S as L,_ as H,a as R,b as Z,c as G,d as W}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-B5xoDBal.js";import{c as X,_ as Y}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-CMt6cUNr.js";import{d as T,p as J,o as n,j as N,e,x as K,n as O,m as Q,r as b,y as ee,a0 as M,a1 as le,c as f,a as y,b as l,w as a,B as g,A as F,q as v,t as ae,ac as se,_ as E,a5 as oe,a6 as te}from"./index-DWUfbFQb.js";import{t as ne,z as h,a as ie,_ as x,b as $,c as w,d as S,F as C}from"./FormMessage.vue_vue_type_script_setup_true_lang-CZjXpZAW.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-Cugwlgzb.js";import{u as re,_ as ue}from"./storage-DaOzRGDB.js";import"./magnifer-outline-DOkcI1w2.js";import"./strings-BzWVocVB.js";import"./thumbHash-Ci89Ad7b.js";const ce=T({__name:"PhoneInput",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(V,{emit:p}){const c=V,u=J(c,"modelValue",p,{passive:!0,defaultValue:c.defaultValue});return(r,t)=>(n(),N(e(X),{unmasked:e(u),"onUpdate:unmasked":t[0]||(t[0]=d=>K(u)?u.value=d:null),type:"text",mask:"000-000-00-00",placeholder:"312-345-67-89",class:O(e(Q)("text-right flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c.class)),inputmode:"numeric"},null,8,["unmasked","class"]))}}),de=["disabled"],me={style:{position:"relative"}},fe={key:0,role:"alert",id:"radix-136-form-item-message",class:"text-sm font-medium text-destructive",type:"error"},_e=y("span",null,"Cancelar",-1),pe=y("span",null,"Crear",-1),ve=1,he=5e6,ge=T({__name:"SellerForm",emits:["submit","cancel","success","error"],setup(V,{emit:p}){const c=["image/jpeg","image/jpg","image/png","image/webp"],i=p,u=b(!1),r=ee(()=>u.value),t=b(null),d=b(null),A=ne(h.object({name:h.string({required_error:"El nombre es requerido"}).transform(s=>s.toLocaleLowerCase()),email:h.string().email({message:"Email invalido"}).optional().or(h.literal("")),phone:h.string({required_error:"El teléfono es requerido"}).refine(s=>s.length===10,{message:"El teléfono debe tener 10 dígitos"}),photo:h.instanceof(File).refine(s=>s instanceof File,{message:"Debe seleccionar una imagen"}).refine(s=>c.includes(s.type),{message:"Tipo de archivo no aceptado"}).refine(s=>s.size>=ve,{message:"El archivo está vacío"}).refine(s=>s.size<=he,{message:"El archivo es demasiado grande"}).optional()})),{handleSubmit:B}=ie({validationSchema:A,initialValues:{}}),j=()=>{i("cancel")},D=B(async s=>{i("submit"),console.log(s),u.value=!0;const _={name:s.name,email:s.email||null,phone:s.phone,avatar_url:null,thumb_hash:null};s.photo&&await re(s.photo,s.photo.name).then(o=>{console.log(o),_.avatar_url=o==null?void 0:o.fullPath,_.thumb_hash=t.value}).catch(o=>{console.error(o)}),U(_).then(o=>{i("success"),console.log(o)}).catch(o=>{i("error"),console.error(o),d.value=o.message}).finally(()=>{u.value=!1})},({errors:s})=>{console.log(s)});return M(async()=>{}),(s,_)=>{const o=le("auto-animate");return n(),f("form",{onSubmit:_[1]||(_[1]=te((...m)=>e(D)&&e(D)(...m),["prevent"]))},[y("fieldset",{disabled:r.value},[l(e(C),{name:"name"},{default:a(({componentField:m})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("Nombre")]),_:1}),l(e(w),null,{default:a(()=>[l(e(I),F({type:"text",placeholder:"Nombre del vendedor"},m,{required:""}),null,16)]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),l(e(C),{name:"email"},{default:a(({componentField:m})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("E-mail")]),_:1}),l(e(w),null,{default:a(()=>[l(e(I),F({type:"email",placeholder:"mail@example.com"},m),null,16)]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),l(e(C),{name:"phone"},{default:a(({value:m,handleChange:k})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("Numero de contacto")]),_:1}),l(e(w),null,{default:a(()=>[l(ce,{"model-value":m,"onUpdate:modelValue":P=>k(P,!0),required:""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),l(e(C),{name:"photo"},{default:a(({componentField:m})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("Foto de perfil")]),_:1}),l(e(w),null,{default:a(()=>[l(ue,F(m,{base64ThumbHash:t.value,"onUpdate:base64ThumbHash":_[0]||(_[0]=k=>t.value=k)}),null,16,["base64ThumbHash"])]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),v((n(),f("div",me,[d.value!==null?(n(),f("p",fe,ae(d.value),1)):se("",!0)])),[[o]]),l(e(x),{class:"space-y-0 w-full py-2 flex flex-col-reverse md:flex-row items-center justify-end gap-2"},{default:a(()=>[l(e(E),{type:"button",class:"w-full gap-2",variant:"outline",onClick:j},{default:a(()=>[_e]),_:1}),l(e(E),{type:"submit",class:"w-full gap-2"},{default:a(()=>[v((n(),f("div",null,[u.value?(n(),N(e(oe),{key:0,class:"h-6 w-6"})):(n(),N(e(L),{key:1,class:"w-6 h-6"}))])),[[o]]),pe]),_:1})]),_:1})],8,de)],32)}}}),be={class:"w-full flex flex-col items-center"},ye=y("span",{class:"hidden md:inline"},"Nuevo vendedor",-1),xe={class:"grid gap-4 py-4"},$e=y("span",null,"Crear vendedor",-1),qe=T({__name:"SellersView",setup(V){const p=b(!1),c=b([]),i=b(!1),u=()=>{i.value=!1,q().then(r=>{c.value=r}).catch(r=>{console.log(r)})};return M(async()=>{p.value=!0,q().then(r=>{c.value=r}).catch(r=>{console.log(r)}).finally(()=>{p.value=!1})}),(r,t)=>(n(),f("div",be,[l(z,{sellers:c.value,isLoading:p.value},{actionButton:a(()=>[l(e(H),{open:i.value,"onUpdate:open":t[1]||(t[1]=d=>i.value=d)},{default:a(()=>[l(e(Y),{"as-child":""},{default:a(()=>[l(e(E),{class:"gap-2"},{default:a(()=>[l(e(L),{class:"w-5 h-5"}),ye]),_:1})]),_:1}),l(e(R),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[l(e(G),null,{default:a(()=>[g("Crear nuevo vendedor")]),_:1}),l(e(W),null,{default:a(()=>[g(" Crea un nuevo vendedor ")]),_:1})]),_:1}),y("div",xe,[l(ge,{onSuccess:u,onCancel:t[0]||(t[0]=d=>i.value=!1)})])]),_:1})]),_:1},8,["open"])]),actionForEmpty:a(()=>[l(e(E),{class:"gap-2",onClick:t[2]||(t[2]=d=>i.value=!0)},{default:a(()=>[l(e(L),{class:"w-5 h-5"}),$e]),_:1})]),_:1},8,["sellers","isLoading"])]))}});export{qe as default};
