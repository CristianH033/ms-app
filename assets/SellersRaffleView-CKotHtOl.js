import{_ as ue}from"./SellersList.vue_vue_type_script_setup_true_lang-xjT96u3T.js";import{d as ce,_ as fe,a as de,b as me,c as he}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CUzrxOeU.js";import{_ as ge}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-Ce3fViH6.js";import{o as X,c as G,a as D,d as pe,U as ve,r as S,x as we,h as ye,b as p,w as M,e as v,t as x,_ as I,A as _e,X as Me}from"./index-BjlmlwE0.js";import{_ as $e,a as be,b as De,c as Te}from"./CardContent.vue_vue_type_script_setup_true_lang-DsIcsWTV.js";import{g as Ze,a as Ne}from"./sellers-CTvpOThq.js";import{S as q}from"./add-circle-line-duotone-ODTsC-TE.js";import{S as xe}from"./cup-star-line-duotone-D6jtc1PZ.js";import{_ as Ye}from"./AddSellerToRaffleForm.vue_vue_type_script_setup_true_lang-DY5cKdr9.js";import"./Input.vue_vue_type_script_setup_true_lang-FM6kbhvc.js";import"./magnifer-outline-jFXUt7Un.js";import"./FormMessage.vue_vue_type_script_setup_true_lang-lo8LE_9R.js";import"./raffles-OnuHJqlS.js";import"./MoneyInput.vue_vue_type_script_setup_true_lang-CRJI9V7y.js";import"./component-DY5KWrnK.js";import"./SelectScrollDownButton.vue_vue_type_script_setup_true_lang-BN3Xsgzs.js";import"./createLucideIcon-DMQw4zqd.js";var Q=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function Se(e){const t=e.match(Q);if(t){const n=Number(t[2]);if(n<1||n>12)return!1;if(typeof t[3]!==void 0){const s=Number(t[3]);if(s<1||s>31)return!1}if(typeof t[4]!==void 0){const s=Number(t[4]);if(s<0||s>23)return!1}return!0}return!1}function Pe(e){const t=e.match(Q);return t&&typeof t[4]>"u"?e+="T00:00:00":e}function Y(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(e=e.trim(),Se(e))return new Date(Pe(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}function Ce(e){const t=Y(e);return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t}function ke(e){return Ce(e).getDate()}var E="1999-03-04T02:05:01.000Z",A=new Map,L=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],U=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],R=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],H={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function ee(e){if(/^[+-]\d{2}:\d{2}/.test(e))return 6;if(/^[+-]\d{4}/.test(e))return 5;throw new Error("Invalid offset format")}var He=["MMMM","MMM","dddd","ddd"],g=new Map([...L,...U,...R].map(e=>[e[0],e])),z=new Map,te=["full","long","medium","short"],Z=e=>String(e).padStart(2,"0"),F=e=>String(e).padStart(2,"0");function T(e){return e.type==="literal"&&(e.value=e.value.normalize("NFKC")),e}function Ie(e,t,n,s=!1,r=null){const a=Ae(e,t,n,s),i=Y(e);function c({partName:u,partValue:d,token:o}){if(u==="literal")return d;const l=a[u];if(u==="hour"&&o==="H")return l.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(o)&&l.length===1)return`0${l}`;if(u==="dayPeriod"){const h=C(i.getUTCHours()<12?"am":"pm",n);return o==="A"?h.toUpperCase():h.toLowerCase()}return u==="timeZoneName"?r??re(-1*i.getTimezoneOffset(),o):l}return t.map(u=>({...u,value:c(u)}))}function Ae(e,t,n,s=!1){const r=Y(e),a=t.filter(o=>o.hour12),i=t.filter(o=>!o.hour12),c=[],u=[];function d(o,l=!1){const h=`${n}-u-hc-${l?"h12":"h23"}`;if(c.push(...new Intl.DateTimeFormat(h,o.reduce((f,m)=>m.partName==="literal"?f:(s&&He.includes(m.token)&&u.push(m),Object.assign(f,m.option)),{timeZone:"UTC"})).formatToParts(r).map(T)),s&&u.length)for(const f of u){let m=[];switch(f.token){case"MMMM":m=new Intl.DateTimeFormat(h,{dateStyle:"long",timeZone:"UTC"}).formatToParts(r).map(T);break;case"MMM":m=new Intl.DateTimeFormat(h,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(r).map(T);break}const y=m.find(w=>w.type===f.partName),_=c.findIndex(w=>w.type===f.partName);y&&_>-1&&(c[_]=y)}}return a.length&&d(a,!0),i.length&&d(i),c.reduce((o,l)=>(o[l.type]=l.value,o),{})}function re(e,t="Z"){const n=String(Math.floor(Math.abs(e/60))).padStart(2,"0"),s=String(Math.abs(e%60)).padStart(2,"0"),r=e<0?"-":"+";return t==="ZZ"?`${r}${n}${s}`:`${r}${n}:${s}`}function Fe(e,t){ne(e,t);const[n,s,r,a]=e.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),i=Number(r)*60+Number(a);return s==="+"?i:-i}function ne(e,t="Z"){if(!(s=>{switch(s){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(e);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(e)}})(t))throw new Error(`Invalid offset: ${e}`);return e}function Ee(e){return L.concat(U).concat(R).sort((t,n)=>t[0].length>n[0].length?1:-1).reduce((t,n)=>t.replace(n[0],`\\${n[0]}`),e)}function Le(e){return["numeric","2-digit"].includes(e.partValue)}function Ue(e){let t;for(const n of e){if(n.partName==="literal"&&!isNaN(parseFloat(n.partValue)))throw new Error(`Numbers in format (${n.partValue}).`);if(t&&t.partName!=="literal"&&n.partName!=="literal"&&!(t.token in H)&&!(n.token in H)&&!(Le(t)&&n.token.toLowerCase()==="a"))throw new Error(`Illegal adjacent tokens (${t.token}, ${n.token})`);t=n}return e}function Re(e){return typeof e=="string"?e.includes("ZZ")?"ZZ":"Z":"time"in e&&e.time==="full"?"Z":"ZZ"}function C(e,t){const n=z.get(t);if(n&&n[e])return n[e];const s=new Date(E);s.setUTCHours(e==="am"?5:20);const a=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(s).map(T).find(i=>i.type==="dayPeriod");if(a){const i=n||{};return z.set(t,Object.assign(i,{[e]:a.value})),a.value}return e}function je(e,t="+00:00"){const n=Y(e),s=(()=>{switch(ee(t)){case 5:return"ZZ";case 6:return"Z"}})(),r=Fe(t,s);return new Date(n.getTime()+r*1e3*60)}function se(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function K(e,t){const n=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hourCycle:"h23"}).formatToParts(e).map(T),s={};return n.forEach(r=>{s[r.type]=r.value}),new Date(`${s.year}-${s.month}-${s.day}T${s.hour}:${s.minute}:${s.second}Z`)}function O(e,t="UTC",n="device",s="Z"){var r;n=n==="device"?(r=se())!=null?r:"utc":n;const a=Y(e),i=K(a,t),c=K(a,n),u=Math.round((c.getTime()-i.getTime())/1e3/60);return re(u,s)}function j(e,t){if(te.includes(e)||typeof e=="object")return We(e,t);let n=e,s=0;const r=o=>{if(o[2]||(o[2]=new RegExp(`(.)?(${o[0]})`,"g")),o[2].test(n)){let l=0;return n=n.replace(o[2],(h,f,m)=>f==="\\"?m:`${typeof f=="string"?f:""}{!${l++?s:s++}!}`),!!l}return!1};function a(o){const l=o.map(f=>f.partName),h=new Set(l);if(l.length>h.size)throw new Error("Cannot reuse format tokens.");return o}function i(o,[l,h,f]){const m=Object.keys(h)[0],y=h[m];return{option:h,partName:m,partValue:y,token:l,pattern:f,hour12:o}}const c=L.filter(r).concat(U.filter(r)).map(i.bind(null,!1)),u=a(c.concat(R.filter(r).map(i.bind(null,!0)))),d=/^\{!(\d+)!\}$/;return n.split(/(\{!\d+!\})/).map(o=>{const l=o.match(d);return l?u[Number(l[1])]:{option:{literal:o},partName:"literal",partValue:o,token:o,pattern:new RegExp(""),hour12:!1}}).filter(o=>!(o.partName==="literal"&&o.partValue===""))}function We(e,t){const n={timeZone:"UTC"};typeof e=="string"?n.dateStyle=e:("date"in e&&(n.dateStyle=e.date),"time"in e&&(n.timeStyle=e.time));const s=new Intl.DateTimeFormat(t,n),r=s.formatToParts(new Date(E)).map(T),i=s.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(T).find(u=>u.type==="hour"),c=i&&i.value==="23"?24:12;return r.map(u=>{const d=u.type,o=Ve(u.type,u.value,t,u.type==="hour"?c:void 0,n);if(o===void 0)return;const l=o[1][d];if(l)return o[2]||(o[2]=new RegExp(`${o[0]}`,"g")),{option:{[d]:l},partName:d,partValue:l,token:o[0],pattern:o[2],hour12:c===12}}).filter(u=>!!u)}function Ve(e,t,n,s,r){const a=t.length,i=!isNaN(Number(t));let c;switch(e){case"year":return a===2?g.get("YY"):g.get("YYYY");case"month":if(i)return a===1?g.get("M"):g.get("MM");switch(c=J(n,e,t),c){case"long":return g.get("MMMM");default:return g.get("MMM")}case"day":return a===1?g.get("D"):g.get("DD");case"weekday":switch(c=J(n,e,t),c){case"narrow":return g.get("d");case"short":return g.get("ddd");default:return g.get("dddd")}case"hour":return s===12?a===1?g.get("h"):g.get("hh"):a===1?g.get("H"):g.get("HH");case"minute":return a===1?g.get("m"):g.get("mm");case"second":return a===1?g.get("s"):g.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?g.get("A"):g.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":return r.timeStyle==="full"?g.get("Z"):g.get("ZZ");default:return}}function J(e,t,n){if(!A.has(e)){const r=new Date(E),a=[3,8,9,7,6,4,3],i=["weekday","month","dayPeriod"],c=["long","short","narrow"],u={};for(let d=0;d<12;d++){r.setMonth(0+d),d in a&&r.setDate(a[d]),r.setUTCHours(8+d);for(const o of c){const l=new Intl.DateTimeFormat(e,i.reduce((h,f)=>Object.assign(h,{[f]:o}),{hour12:!0,timeZone:"UTC"})).formatToParts(r).map(T);if(o==="long"||o==="short"){const f=new Intl.DateTimeFormat(e,{dateStyle:o==="short"?"medium":"long",timeZone:"UTC"}).formatToParts(r).map(T).find(y=>y.type==="month"),m=l.findIndex(y=>y.type==="month");m>-1&&f&&(l[m]=f)}l.forEach(h=>{if(h.type==="literal")return;const f=h.type;u[f]=Object.assign(u[f]||{},{[h.value]:o})})}}A.set(e,u)}const s=A.get(e);return s?s[t][n]:void 0}function Be(e,t="+00:00"){const n=t.slice(0,1)==="+";return je(e,t.replace(n?"+":"-",n?"-":"+"))}function qe(){return Intl.DateTimeFormat().resolvedOptions().locale}function P(e,t="long",n="device",s=!1,r){let a,i;return typeof e=="object"&&!(e instanceof Date)&&({date:e,format:t,locale:n,genitive:s,partFilter:r,tz:a}=e),t==="ISO8601"?Y(e).toISOString():(a&&(i=O(e,"utc",a,Re(t))),a??(a=se()),(a==null?void 0:a.toLowerCase())!=="utc"&&(e=Be(e,O(e,a,"utc"))),(!n||n==="device")&&(n=qe()),Ie(e,j(t,n).filter(r??(()=>!0)),n,s,i).map(c=>c.value).join(""))}function ze(e,t="en",n=!1,s=()=>!0){return j(e,t).filter(s).reduce((r,a)=>r+=n&&a.partName==="literal"?Ee(a.token):a.token,"").normalize("NFKC")}function Ke(e){const t=new Date().getFullYear(),n=t%100,s=Math.floor(t/100),r=Number(e);return(s+(r>n+20?-1:0))*100+r}function ae(e,t="en",n=!1){const s=(r,a)=>Array(r).fill("").map((i,c)=>`${a(c)}`);if(e==="M")return s(12,r=>r+1);if(e==="MM")return s(12,r=>{const a=r+1;return a<10?`0${a}`:a});if(e.startsWith("M"))return ae("MM").map(r=>P(`2000-${r}-05`,e,t,n));if(e.startsWith("d"))return s(7,r=>`0${r+2}`).map(r=>P(`2022-10-${r}`,e,t));if(e==="a")return[C("am",t).toLowerCase(),C("pm",t).toLowerCase()];if(e==="A")return[C("am",t).toUpperCase(),C("pm",t).toUpperCase()];if(e.startsWith("Y")){const r=new Date().getFullYear();return s(120,a=>a+1).reduce((a,i)=>(i!=="120"&&a.push(P(`${r+Number(i)}-06-06`,e,t)),a.unshift(P(`${r-Number(i)}-06-06`,e,t)),a),[P(`${r}-06-06`,e,t)])}return e.startsWith("D")?s(31,r=>`${e==="DD"&&r<9?"0":""}${r+1}`):e.startsWith("H")?s(24,r=>`${e==="HH"&&r<10?"0":""}${r}`):e.startsWith("h")?s(12,r=>`${e==="hh"&&r<9?"0":""}${r+1}`):e.startsWith("m")||e.startsWith("s")?s(60,r=>`${e.length>1&&r<10?"0":""}${r}`):[]}function Oe(e,t="ISO8601",n="device"){let s=()=>!0,r,a="backward";if(typeof e=="object"?{date:r,format:t="ISO8601",locale:n="device",dateOverflow:a="backward",partFilter:s=()=>!0}=e:r=e,!r)throw new Error("parse() requires a date string.");const i=()=>{throw new Error(`Date (${r}) does not match format (${ze(t,n)})`)};if(t==="ISO8601")return Y(r);const c=te.includes(t)||typeof t=="object",u=Ue(j(t,n).filter(s));if(!u.length)throw new Error("parse() requires a pattern.");let d;try{d=Je(r,u)}catch{return i()}const o=new Date,l=new Map([["YYYY",o.getFullYear()],["MM",o.getMonth()+1],["DD",o.getDate()],["HH",0],["mm",0],["ss",0]]);let h=null,f="";d.forEach($=>{if($.partName==="literal")return;if($.token===$.value)return i();const k=Number($.value);if(l.has($.token))l.set($.token,k);else if($.token==="YY")l.set("YYYY",Ke($.value));else{const b=$.token;if(b.startsWith("d"))return;if(b==="D")l.set("DD",k);else if(b==="H"||b.startsWith("h"))l.set("HH",k);else if(b==="M")l.set("MM",k);else if(b==="a"||b==="A")h=$.value.toLowerCase()===C("am",n).toLowerCase();else if(b==="Z"||b==="ZZ")f=ne($.value,b);else{const B=ae(b,n,c).indexOf($.value);if(B!==-1)switch(b){case"MMM":case"MMMM":l.set("MM",B+1);break}}}});let m=l.get("HH")||0;h===!1?(m+=m===12?0:12,l.set("HH",m===24?0:m)):h===!0&&m===12&&l.set("HH",0),l.set("MM",(l.get("MM")||1)-1);let[y,_,w,N,oe,ie]=Array.from(l.values());const W=ke(new Date(`${F(y)}-${Z(_+1)}-10`));if(W<w&&a==="throw")throw new Error(`Invalid date ${F(y)}-${Z(_+1)}-${Z(w)}`);w=a==="backward"?Math.min(w,W):w;const le=`${F(y)}-${Z(_+1)}-${Z(w)}T${Z(N)}:${Z(oe)}:${Z(ie)}${f}`,V=new Date(le);return isFinite(+V)?V:i()}function Je(e,t){let n=0;const s=c=>[c[n++],c[n]];let r=0;const a=[];let i;do{const[c,u]=s(t);i=u;let d=1;if(c.partName==="literal")d=c.partValue.length;else if(c.partName==="timeZoneName")d=ee(e.substring(r));else if(c.token in H)d=H[c.token];else if(u)if(u.partName==="literal"){if(d=e.indexOf(u.partValue,r)-r,d<0)throw new Error}else if(u.partName==="dayPeriod"){for(let o=1;o<=4;o++)if(isNaN(Number(e.charAt(r+o)))){d=o;break}}else{const o=e.substring(r).search(/\d/);o!==-1&&(d=r+o)}else d=e.length;a.push({...c,value:e.substring(r,r+d)}),r+=d}while(i);return a}const Xe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ge=D("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m9 5l6 7l-6 7"},null,-1),Qe=[Ge];function et(e,t){return X(),G("svg",Xe,[...Qe])}const tt={name:"solar-alt-arrow-right-line-duotone",render:et},rt={class:"w-full flex flex-col items-center gap-4"},nt={class:"text-2xl font-bold"},st={class:"text-xl font-bold"},at={class:"text-xs text-muted-foreground"},ot={class:"text-xs text-muted-foreground"},it=D("span",{class:"hidden md:inline"},"Agregar",-1),lt={class:"overflow-y-auto relative p-4"},ut=D("p",null,"No hay vendedores en esta rifa",-1),ct=D("span",null,"Agregar venddor a esta rifa",-1),Yt=pe({__name:"SellersRaffleView",setup(e){const t=ve(),n=S(),s=S([]),r=S([]),a=S(""),i=S(!1),c=S(!1),u=t.currentRoute.value.params.id,d=async()=>{await Me.from("raffle_stats").select("*").eq("raffle_id",u).single().then(f=>{n.value=f.data})},o=async()=>{i.value=!0,Ze().then(f=>{s.value=f}).catch(f=>{console.error(f)}).finally(()=>{i.value=!1})},l=async()=>{i.value=!0,Ne(Number(u)).then(f=>{r.value=f}).catch(f=>{console.error(f)}).finally(()=>{i.value=!1})},h=async()=>{c.value=!1,await l()};return we(async()=>{var y;await d(),await o(),await l();const f=Oe((y=n.value)==null?void 0:y.draw_drawn_at,"YYYY-MM-DDTHH:mm:ss"),m=P(f,"YYYY/MM/DD");a.value=m}),(f,m)=>{const y=ye("RouterLink");return X(),G("div",rt,[p(v(Te),{class:"w-full"},{default:M(()=>[p(v($e),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:M(()=>[p(v(be),{class:"text-lg font-medium"},{default:M(()=>{var _,w,N;return[D("p",nt,x((_=n.value)==null?void 0:_.raffle_name),1),D("p",null,x((w=n.value)==null?void 0:w.description),1),D("p",null,"Juega con: "+x((N=n.value)==null?void 0:N.draw_name)+" - ("+x(a.value)+")",1)]}),_:1}),p(v(xe),{class:"w-6 h-6"})]),_:1}),p(v(De),null,{default:M(()=>{var _,w,N;return[D("div",st,x((_=n.value)==null?void 0:_.total_tickets)+" boletas",1),D("p",at,x((w=n.value)==null?void 0:w.available_tickets)+" Disponibles",1),D("p",ot,x((N=n.value)==null?void 0:N.taken_tickets)+" asignadas",1)]}),_:1})]),_:1}),p(ue,{sellers:r.value,isLoading:i.value},{actionButton:M(()=>[p(v(ce),{open:c.value,"onUpdate:open":m[1]||(m[1]=_=>c.value=_)},{default:M(()=>[p(v(fe),{"as-child":""},{default:M(()=>[p(v(I),{class:"gap-2"},{default:M(()=>[p(v(q),{class:"w-5 h-5"}),it]),_:1})]),_:1}),p(v(de),{class:"transition-[opacity,_transform] gap-0 p-0 max-w-2xl w-[calc(100vw-2rem)] max-h-[calc(100dvh-2rem)] rounded-lg grid-rows-[auto_minmax(0,1fr)_auto]"},{default:M(()=>[p(v(me),{class:"p-4 border-b"},{default:M(()=>[p(v(he),null,{default:M(()=>[_e("Agregar vendedor")]),_:1}),p(v(ge),{class:"mt-4"})]),_:1}),D("div",lt,[p(Ye,{"raffle-id":Number(v(u)),onCancel:m[0]||(m[0]=()=>c.value=!1),onSuccess:h},null,8,["raffle-id"])])]),_:1})]),_:1},8,["open"])]),emptyText:M(()=>[ut]),actionForEmpty:M(()=>[p(v(I),{class:"gap-2",onClick:m[2]||(m[2]=_=>c.value=!0)},{default:M(()=>[p(v(q),{class:"w-5 h-5"}),ct]),_:1})]),itemAction:M(({seller:_})=>[p(y,{custom:"",to:{name:"raffle-seller",params:{id:v(u),seller_id:_.id}}},{default:M(({navigate:w})=>[p(v(I),{class:"gap-2",type:"button",variant:"outline",onClick:w},{default:M(()=>[p(v(tt),{class:"w-6 h-6"})]),_:2},1032,["onClick"])]),_:2},1032,["to"])]),_:1},8,["sellers","isLoading"])])}}});export{Yt as default};
