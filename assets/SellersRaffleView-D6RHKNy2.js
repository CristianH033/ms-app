import{_ as ue}from"./SellersList.vue_vue_type_script_setup_true_lang-DY8XizaG.js";import{c as ce,_ as fe,a as de,b as me}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CqpO9Kok.js";import{_ as he}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-CjpQ55xB.js";import{_ as ge}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-n6a3Geue.js";import{o as G,c as Q,a as D,d as pe,P as ve,r as Y,p as we,h as ye,b as p,w as _,e as v,t as x,_ as I,s as _e,M as Me}from"./index-XnMAgjIh.js";import{_ as $e,a as be,b as De,c as Te}from"./CardContent.vue_vue_type_script_setup_true_lang-X55XFihy.js";import{g as Ze,a as Ne}from"./sellers-BMYrNj6r.js";import{S as q}from"./add-circle-line-duotone-Cph3MIjB.js";import{S as Ye}from"./cup-star-line-duotone-Wcn8BS-f.js";import{_ as xe}from"./AddSellerToRaffleForm.vue_vue_type_script_setup_true_lang-CVeiJfCZ.js";import"./Input.vue_vue_type_script_setup_true_lang-CR_kah2p.js";import"./magnifer-outline-B9cnIhAo.js";import"./strings-BzWVocVB.js";import"./FormMessage.vue_vue_type_script_setup_true_lang-8d4XG-IS.js";import"./raffles-C5c-UYWO.js";import"./MoneyInput.vue_vue_type_script_setup_true_lang-Bn8o8-K2.js";import"./component-BrdiS1Mf.js";import"./SelectScrollDownButton.vue_vue_type_script_setup_true_lang-zIROrtod.js";import"./createLucideIcon-DuH0ZRGa.js";const Se={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pe=D("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m9 5l6 7l-6 7"},null,-1),Ce=[Pe];function ke(e,t){return G(),Q("svg",Se,[...Ce])}const He={name:"solar-alt-arrow-right-line-duotone",render:ke};var X=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function Ie(e){const t=e.match(X);if(t){const n=Number(t[2]);if(n<1||n>12)return!1;if(typeof t[3]!==void 0){const s=Number(t[3]);if(s<1||s>31)return!1}if(typeof t[4]!==void 0){const s=Number(t[4]);if(s<0||s>23)return!1}return!0}return!1}function Ae(e){const t=e.match(X);return t&&typeof t[4]>"u"?e+="T00:00:00":e}function N(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(e=e.trim(),Ie(e))return new Date(Ae(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}function Fe(e){const t=N(e);return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t}function Ee(e){return Fe(e).getDate()}var E="1999-03-04T02:05:01.000Z",A=new Map,L=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],U=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],R=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],H={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function ee(e){if(/^[+-]\d{2}:\d{2}/.test(e))return 6;if(/^[+-]\d{4}/.test(e))return 5;throw new Error("Invalid offset format")}var Le=["MMMM","MMM","dddd","ddd"],g=new Map([...L,...U,...R].map(e=>[e[0],e])),z=new Map,te=["full","long","medium","short"],Z=e=>String(e).padStart(2,"0"),F=e=>String(e).padStart(2,"0");function T(e){return e.type==="literal"&&(e.value=e.value.normalize("NFKC")),e}function Ue(e,t,n,s=!1,r=null){const a=Re(e,t,n,s),i=N(e);function c({partName:u,partValue:d,token:o}){if(u==="literal")return d;const l=a[u];if(u==="hour"&&o==="H")return l.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(o)&&l.length===1)return`0${l}`;if(u==="dayPeriod"){const h=P(i.getUTCHours()<12?"am":"pm",n);return o==="A"?h.toUpperCase():h.toLowerCase()}return u==="timeZoneName"?r??re(-1*i.getTimezoneOffset(),o):l}return t.map(u=>({...u,value:c(u)}))}function Re(e,t,n,s=!1){const r=N(e),a=t.filter(o=>o.hour12),i=t.filter(o=>!o.hour12),c=[],u=[];function d(o,l=!1){const h=`${n}-u-hc-${l?"h12":"h23"}`;if(c.push(...new Intl.DateTimeFormat(h,o.reduce((f,m)=>m.partName==="literal"?f:(s&&Le.includes(m.token)&&u.push(m),Object.assign(f,m.option)),{timeZone:"UTC"})).formatToParts(r).map(T)),s&&u.length)for(const f of u){let m=[];switch(f.token){case"MMMM":m=new Intl.DateTimeFormat(h,{dateStyle:"long",timeZone:"UTC"}).formatToParts(r).map(T);break;case"MMM":m=new Intl.DateTimeFormat(h,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(r).map(T);break}const M=m.find(w=>w.type===f.partName),y=c.findIndex(w=>w.type===f.partName);M&&y>-1&&(c[y]=M)}}return a.length&&d(a,!0),i.length&&d(i),c.reduce((o,l)=>(o[l.type]=l.value,o),{})}function re(e,t="Z"){const n=String(Math.floor(Math.abs(e/60))).padStart(2,"0"),s=String(Math.abs(e%60)).padStart(2,"0"),r=e<0?"-":"+";return t==="ZZ"?`${r}${n}${s}`:`${r}${n}:${s}`}function je(e,t){ne(e,t);const[n,s,r,a]=e.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),i=Number(r)*60+Number(a);return s==="+"?i:-i}function ne(e,t="Z"){if(!(s=>{switch(s){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(e);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(e)}})(t))throw new Error(`Invalid offset: ${e}`);return e}function We(e){return L.concat(U).concat(R).sort((t,n)=>t[0].length>n[0].length?1:-1).reduce((t,n)=>t.replace(n[0],`\\${n[0]}`),e)}function Ve(e){return["numeric","2-digit"].includes(e.partValue)}function Be(e){let t;for(const n of e){if(n.partName==="literal"&&!isNaN(parseFloat(n.partValue)))throw new Error(`Numbers in format (${n.partValue}).`);if(t&&t.partName!=="literal"&&n.partName!=="literal"&&!(t.token in H)&&!(n.token in H)&&!(Ve(t)&&n.token.toLowerCase()==="a"))throw new Error(`Illegal adjacent tokens (${t.token}, ${n.token})`);t=n}return e}function qe(e){return typeof e=="string"?e.includes("ZZ")?"ZZ":"Z":"time"in e&&e.time==="full"?"Z":"ZZ"}function P(e,t){const n=z.get(t);if(n&&n[e])return n[e];const s=new Date(E);s.setUTCHours(e==="am"?5:20);const a=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(s).map(T).find(i=>i.type==="dayPeriod");if(a){const i=n||{};return z.set(t,Object.assign(i,{[e]:a.value})),a.value}return e}function ze(e,t="+00:00"){const n=N(e),s=(()=>{switch(ee(t)){case 5:return"ZZ";case 6:return"Z"}})(),r=je(t,s);return new Date(n.getTime()+r*1e3*60)}function se(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function K(e,t){const n=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hourCycle:"h23"}).formatToParts(e).map(T),s={};return n.forEach(r=>{s[r.type]=r.value}),new Date(`${s.year}-${s.month}-${s.day}T${s.hour}:${s.minute}:${s.second}Z`)}function O(e,t="UTC",n="device",s="Z"){var r;n=n==="device"?(r=se())!=null?r:"utc":n;const a=N(e),i=K(a,t),c=K(a,n),u=Math.round((c.getTime()-i.getTime())/1e3/60);return re(u,s)}function j(e,t){if(te.includes(e)||typeof e=="object")return Ke(e,t);let n=e,s=0;const r=o=>{if(o[2]||(o[2]=new RegExp(`(.)?(${o[0]})`,"g")),o[2].test(n)){let l=0;return n=n.replace(o[2],(h,f,m)=>f==="\\"?m:`${typeof f=="string"?f:""}{!${l++?s:s++}!}`),!!l}return!1};function a(o){const l=o.map(f=>f.partName),h=new Set(l);if(l.length>h.size)throw new Error("Cannot reuse format tokens.");return o}function i(o,[l,h,f]){const m=Object.keys(h)[0],M=h[m];return{option:h,partName:m,partValue:M,token:l,pattern:f,hour12:o}}const c=L.filter(r).concat(U.filter(r)).map(i.bind(null,!1)),u=a(c.concat(R.filter(r).map(i.bind(null,!0)))),d=/^\{!(\d+)!\}$/;return n.split(/(\{!\d+!\})/).map(o=>{const l=o.match(d);return l?u[Number(l[1])]:{option:{literal:o},partName:"literal",partValue:o,token:o,pattern:new RegExp(""),hour12:!1}}).filter(o=>!(o.partName==="literal"&&o.partValue===""))}function Ke(e,t){const n={timeZone:"UTC"};typeof e=="string"?n.dateStyle=e:("date"in e&&(n.dateStyle=e.date),"time"in e&&(n.timeStyle=e.time));const s=new Intl.DateTimeFormat(t,n),r=s.formatToParts(new Date(E)).map(T),i=s.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(T).find(u=>u.type==="hour"),c=i&&i.value==="23"?24:12;return r.map(u=>{const d=u.type,o=Oe(u.type,u.value,t,u.type==="hour"?c:void 0,n);if(o===void 0)return;const l=o[1][d];if(l)return o[2]||(o[2]=new RegExp(`${o[0]}`,"g")),{option:{[d]:l},partName:d,partValue:l,token:o[0],pattern:o[2],hour12:c===12}}).filter(u=>!!u)}function Oe(e,t,n,s,r){const a=t.length,i=!isNaN(Number(t));let c;switch(e){case"year":return a===2?g.get("YY"):g.get("YYYY");case"month":if(i)return a===1?g.get("M"):g.get("MM");switch(c=J(n,e,t),c){case"long":return g.get("MMMM");default:return g.get("MMM")}case"day":return a===1?g.get("D"):g.get("DD");case"weekday":switch(c=J(n,e,t),c){case"narrow":return g.get("d");case"short":return g.get("ddd");default:return g.get("dddd")}case"hour":return s===12?a===1?g.get("h"):g.get("hh"):a===1?g.get("H"):g.get("HH");case"minute":return a===1?g.get("m"):g.get("mm");case"second":return a===1?g.get("s"):g.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?g.get("A"):g.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":return r.timeStyle==="full"?g.get("Z"):g.get("ZZ");default:return}}function J(e,t,n){if(!A.has(e)){const r=new Date(E),a=[3,8,9,7,6,4,3],i=["weekday","month","dayPeriod"],c=["long","short","narrow"],u={};for(let d=0;d<12;d++){r.setMonth(0+d),d in a&&r.setDate(a[d]),r.setUTCHours(8+d);for(const o of c){const l=new Intl.DateTimeFormat(e,i.reduce((h,f)=>Object.assign(h,{[f]:o}),{hour12:!0,timeZone:"UTC"})).formatToParts(r).map(T);if(o==="long"||o==="short"){const f=new Intl.DateTimeFormat(e,{dateStyle:o==="short"?"medium":"long",timeZone:"UTC"}).formatToParts(r).map(T).find(M=>M.type==="month"),m=l.findIndex(M=>M.type==="month");m>-1&&f&&(l[m]=f)}l.forEach(h=>{if(h.type==="literal")return;const f=h.type;u[f]=Object.assign(u[f]||{},{[h.value]:o})})}}A.set(e,u)}const s=A.get(e);return s?s[t][n]:void 0}function Je(e,t="+00:00"){const n=t.slice(0,1)==="+";return ze(e,t.replace(n?"+":"-",n?"-":"+"))}function Ge(){return Intl.DateTimeFormat().resolvedOptions().locale}function S(e,t="long",n="device",s=!1,r){let a,i;return typeof e=="object"&&!(e instanceof Date)&&({date:e,format:t,locale:n,genitive:s,partFilter:r,tz:a}=e),t==="ISO8601"?N(e).toISOString():(a&&(i=O(e,"utc",a,qe(t))),a??(a=se()),(a==null?void 0:a.toLowerCase())!=="utc"&&(e=Je(e,O(e,a,"utc"))),(!n||n==="device")&&(n=Ge()),Ue(e,j(t,n).filter(r??(()=>!0)),n,s,i).map(c=>c.value).join(""))}function Qe(e,t="en",n=!1,s=()=>!0){return j(e,t).filter(s).reduce((r,a)=>r+=n&&a.partName==="literal"?We(a.token):a.token,"").normalize("NFKC")}function Xe(e){const t=new Date().getFullYear(),n=t%100,s=Math.floor(t/100),r=Number(e);return(s+(r>n+20?-1:0))*100+r}function ae(e,t="en",n=!1){const s=(r,a)=>Array(r).fill("").map((i,c)=>`${a(c)}`);if(e==="M")return s(12,r=>r+1);if(e==="MM")return s(12,r=>{const a=r+1;return a<10?`0${a}`:a});if(e.startsWith("M"))return ae("MM").map(r=>S(`2000-${r}-05`,e,t,n));if(e.startsWith("d"))return s(7,r=>`0${r+2}`).map(r=>S(`2022-10-${r}`,e,t));if(e==="a")return[P("am",t).toLowerCase(),P("pm",t).toLowerCase()];if(e==="A")return[P("am",t).toUpperCase(),P("pm",t).toUpperCase()];if(e.startsWith("Y")){const r=new Date().getFullYear();return s(120,a=>a+1).reduce((a,i)=>(i!=="120"&&a.push(S(`${r+Number(i)}-06-06`,e,t)),a.unshift(S(`${r-Number(i)}-06-06`,e,t)),a),[S(`${r}-06-06`,e,t)])}return e.startsWith("D")?s(31,r=>`${e==="DD"&&r<9?"0":""}${r+1}`):e.startsWith("H")?s(24,r=>`${e==="HH"&&r<10?"0":""}${r}`):e.startsWith("h")?s(12,r=>`${e==="hh"&&r<9?"0":""}${r+1}`):e.startsWith("m")||e.startsWith("s")?s(60,r=>`${e.length>1&&r<10?"0":""}${r}`):[]}function et(e,t="ISO8601",n="device"){let s=()=>!0,r,a="backward";if(typeof e=="object"?{date:r,format:t="ISO8601",locale:n="device",dateOverflow:a="backward",partFilter:s=()=>!0}=e:r=e,!r)throw new Error("parse() requires a date string.");const i=()=>{throw new Error(`Date (${r}) does not match format (${Qe(t,n)})`)};if(t==="ISO8601")return N(r);const c=te.includes(t)||typeof t=="object",u=Be(j(t,n).filter(s));if(!u.length)throw new Error("parse() requires a pattern.");let d;try{d=tt(r,u)}catch{return i()}const o=new Date,l=new Map([["YYYY",o.getFullYear()],["MM",o.getMonth()+1],["DD",o.getDate()],["HH",0],["mm",0],["ss",0]]);let h=null,f="";d.forEach($=>{if($.partName==="literal")return;if($.token===$.value)return i();const k=Number($.value);if(l.has($.token))l.set($.token,k);else if($.token==="YY")l.set("YYYY",Xe($.value));else{const b=$.token;if(b.startsWith("d"))return;if(b==="D")l.set("DD",k);else if(b==="H"||b.startsWith("h"))l.set("HH",k);else if(b==="M")l.set("MM",k);else if(b==="a"||b==="A")h=$.value.toLowerCase()===P("am",n).toLowerCase();else if(b==="Z"||b==="ZZ")f=ne($.value,b);else{const B=ae(b,n,c).indexOf($.value);if(B!==-1)switch(b){case"MMM":case"MMMM":l.set("MM",B+1);break}}}});let m=l.get("HH")||0;h===!1?(m+=m===12?0:12,l.set("HH",m===24?0:m)):h===!0&&m===12&&l.set("HH",0),l.set("MM",(l.get("MM")||1)-1);let[M,y,w,C,oe,ie]=Array.from(l.values());const W=Ee(new Date(`${F(M)}-${Z(y+1)}-10`));if(W<w&&a==="throw")throw new Error(`Invalid date ${F(M)}-${Z(y+1)}-${Z(w)}`);w=a==="backward"?Math.min(w,W):w;const le=`${F(M)}-${Z(y+1)}-${Z(w)}T${Z(C)}:${Z(oe)}:${Z(ie)}${f}`,V=new Date(le);return isFinite(+V)?V:i()}function tt(e,t){let n=0;const s=c=>[c[n++],c[n]];let r=0;const a=[];let i;do{const[c,u]=s(t);i=u;let d=1;if(c.partName==="literal")d=c.partValue.length;else if(c.partName==="timeZoneName")d=ee(e.substring(r));else if(c.token in H)d=H[c.token];else if(u)if(u.partName==="literal"){if(d=e.indexOf(u.partValue,r)-r,d<0)throw new Error}else if(u.partName==="dayPeriod"){for(let o=1;o<=4;o++)if(isNaN(Number(e.charAt(r+o)))){d=o;break}}else{const o=e.substring(r).search(/\d/);o!==-1&&(d=r+o)}else d=e.length;a.push({...c,value:e.substring(r,r+d)}),r+=d}while(i);return a}const rt=(e,t="YYYY/MM/DD")=>{if(e)return S(et(e,"YYYY-MM-DDTHH:mm:ss"),t)},nt={class:"w-full flex flex-col items-center gap-4"},st={class:"text-2xl font-bold"},at={class:"text-xl font-bold"},ot={class:"text-xs text-muted-foreground"},it={class:"text-xs text-muted-foreground"},lt=D("span",{class:"hidden md:inline"},"Agregar",-1),ut={class:"overflow-y-auto relative p-4"},ct=D("p",null,"No hay vendedores en esta rifa",-1),ft=D("span",null,"Agregar venddor a esta rifa",-1),Ct=pe({__name:"SellersRaffleView",setup(e){const t=ve(),n=Y(),s=Y([]),r=Y([]),a=Y(""),i=Y(!1),c=Y(!1),u=t.currentRoute.value.params.id,d=async()=>{await Me.from("raffle_stats").select("*").eq("raffle_id",u).single().then(f=>{n.value=f.data})},o=async()=>{i.value=!0,Ze().then(f=>{s.value=f}).catch(f=>{console.error(f)}).finally(()=>{i.value=!1})},l=async()=>{i.value=!0,Ne(Number(u)).then(f=>{r.value=f}).catch(f=>{console.error(f)}).finally(()=>{i.value=!1})},h=async()=>{c.value=!1,await l()};return we(async()=>{var f;await d(),await o(),await l(),a.value=rt((f=n.value)==null?void 0:f.draw_drawn_at)}),(f,m)=>{const M=ye("RouterLink");return G(),Q("div",nt,[p(v(Te),{class:"w-full"},{default:_(()=>[p(v($e),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:_(()=>[p(v(be),{class:"text-lg font-medium"},{default:_(()=>{var y,w;return[D("p",st,x((y=n.value)==null?void 0:y.raffle_name),1),D("p",null,"Juega con: "+x((w=n.value)==null?void 0:w.draw_name)+" - ("+x(a.value)+")",1)]}),_:1}),p(v(Ye),{class:"w-6 h-6"})]),_:1}),p(v(De),null,{default:_(()=>{var y,w,C;return[D("div",at,x((y=n.value)==null?void 0:y.total_tickets)+" boletas",1),D("p",ot,x((w=n.value)==null?void 0:w.available_tickets)+" Disponibles",1),D("p",it,x((C=n.value)==null?void 0:C.taken_tickets)+" asignadas",1)]}),_:1})]),_:1}),p(ue,{sellers:r.value,isLoading:i.value},{actionButton:_(()=>[p(v(ce),{open:c.value,"onUpdate:open":m[1]||(m[1]=y=>c.value=y)},{default:_(()=>[p(v(he),{"as-child":""},{default:_(()=>[p(v(I),{class:"gap-2"},{default:_(()=>[p(v(q),{class:"w-5 h-5"}),lt]),_:1})]),_:1}),p(v(fe),{class:"transition-[opacity,_transform] gap-0 p-0 max-w-2xl w-[calc(100vw-2rem)] max-h-[calc(100dvh-2rem)] rounded-lg grid-rows-[auto_minmax(0,1fr)_auto]"},{default:_(()=>[p(v(de),{class:"p-4 border-b"},{default:_(()=>[p(v(me),null,{default:_(()=>[_e("Agregar vendedor")]),_:1}),p(v(ge),{class:"mt-4"})]),_:1}),D("div",ut,[p(xe,{"raffle-id":Number(v(u)),onCancel:m[0]||(m[0]=()=>c.value=!1),onSuccess:h},null,8,["raffle-id"])])]),_:1})]),_:1},8,["open"])]),emptyText:_(()=>[ct]),actionForEmpty:_(()=>[p(v(I),{class:"gap-2",onClick:m[2]||(m[2]=y=>c.value=!0)},{default:_(()=>[p(v(q),{class:"w-5 h-5"}),ft]),_:1})]),itemAction:_(({seller:y})=>[p(M,{custom:"",to:{name:"raffle-seller",params:{id:v(u),seller_id:y.id}}},{default:_(({navigate:w})=>[p(v(I),{class:"gap-2",type:"button",variant:"outline",onClick:w},{default:_(()=>[p(v(He),{class:"w-6 h-6"})]),_:2},1032,["onClick"])]),_:2},1032,["to"])]),_:1},8,["sellers","isLoading"])])}}});export{Ct as default};
