import{d as b,z as L,o,j as x,w as r,l as h,G as M,H as A,e,ae as W,y as O,C as Y,A as E,m as j,af as Z,ag as ee,ah as te,ai as Q,b as n,aj as se,ak as ae,al as le,a as c,c as _,n as P,s as oe,r as v,a0 as J,t as w,ac as V,F as S,i as R,am as ne,ad as re,B,_ as K,an as ce}from"./index-DWUfbFQb.js";import{_ as ie}from"./Skeleton.vue_vue_type_script_setup_true_lang-Cq5D5c8C.js";import{c as de,b as ue}from"./createLucideIcon-hTnq9CaT.js";import{g as fe}from"./tickets-B3rxiVS0.js";import{_ as pe}from"./Input.vue_vue_type_script_setup_true_lang-Cugwlgzb.js";import{S as me}from"./ticket-line-duotone-DvTJ89X8.js";import{S as _e}from"./magnifer-outline-DOkcI1w2.js";const ve=de("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ge=b({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(i,{emit:l}){const u=L(i,l);return(a,p)=>(o(),x(e(W),M(A(e(u))),{default:r(()=>[h(a.$slots,"default")]),_:3},16))}}),F=b({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(i){const l=i,d=O(()=>{const{class:u,...a}=l;return a}),t=Y(d);return(u,a)=>(o(),x(e(Z),E(e(t),{class:e(j)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",l.class)}),{default:r(()=>[h(u.$slots,"default")]),_:3},16,["class"]))}}),be=b({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(i){const l=i,d=O(()=>{const{class:t,...u}=l;return u});return(t,u)=>(o(),x(e(ee),E(d.value,{class:e(j)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",l.class)}),{default:r(()=>[h(t.$slots,"default")]),_:3},16,["class"]))}}),xe=b({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(i,{emit:l}){const u=L(i,l);return(a,p)=>(o(),x(e(te),M(A(e(u))),{default:r(()=>[h(a.$slots,"default")]),_:3},16))}}),he=b({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(i){const l=i;return(d,t)=>(o(),x(e(Q),M(A(l)),{default:r(()=>[h(d.$slots,"default")]),_:3},16))}}),ye=c("span",{class:"sr-only"},"Close",-1),we=b({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(i,{emit:l}){const d=i,t=l,u=O(()=>{const{class:p,...g}=d;return g}),a=L(u,t);return(p,g)=>(o(),x(e(le),null,{default:r(()=>[n(e(se),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),n(e(ae),E(e(a),{class:e(j)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",d.class)}),{default:r(()=>[h(p.$slots,"default"),n(e(Q),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:r(()=>[n(e(ve),{class:"w-4 h-4"}),ye]),_:1})]),_:3},16,["class"])]),_:3}))}}),ke=b({__name:"DialogFooter",props:{class:{}},setup(i){const l=i;return(d,t)=>(o(),_("div",{class:P(e(j)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",l.class))},[h(d.$slots,"default")],2))}}),$e={class:"w-full @container/ticketInfo"},Be={class:"w-full flex flex-col gap-2 overflow-hidden relative @md/ticketInfo:flex-row @md/ticketInfo:gap-8"},Ce={class:"min-w-auto flex flex-col justify-center items-center"},Ie={class:"w-28 h-28 rounded-full border bg-background-elevated flex flex-col justify-center items-center"},Te={class:"text-3xl"},Ne={class:"min-w-0 flex flex-col gap-2"},De=c("h2",{class:"text-2xl my-2"},"Información del boleto",-1),Ve={key:0,class:"capitalize"},Oe={key:1,class:"text-sm"},je={key:2,class:"text-sm"},ze={key:3,class:"text-sm"},Fe={key:4,class:"w-full flex flex-col gap-2"},Pe=c("hr",{class:""},null,-1),Se=c("label",{class:""},"Otros boletos del vendedor:",-1),Re={class:"flex flex-row gap-2 overflow-x-auto p-2 rounded-md border"},Le=b({__name:"TicketInfo",props:{ticketId:{}},setup(i){const l=oe.from("tickets").select("*, sellers(*, tickets(*))"),d=i,t=v(),u=async()=>{const{data:a,error:p}=await l.eq("id",d.ticketId).single();return p&&console.error(p),console.log(a),a};return J(async()=>{await u().then(a=>t.value=a).catch(a=>console.error(a)).finally(()=>{})}),(a,p)=>{var g,k,y,$,C,I,T,N,D,s,m,f,z,U,X,q,G;return o(),_("div",$e,[c("div",Be,[c("div",Ce,[c("div",Ie,[c("span",Te,w((g=t.value)==null?void 0:g.number),1)])]),c("div",Ne,[De,(k=t.value)!=null&&k.sellers?(o(),_("p",Ve," Vendedor: "+w(($=(y=t.value)==null?void 0:y.sellers)==null?void 0:$.name),1)):(o(),_("p",Oe,"El Boleto no tiene un vendedor asignado")),(I=(C=t.value)==null?void 0:C.sellers)!=null&&I.email?(o(),_("p",je," Email: "+w((N=(T=t.value)==null?void 0:T.sellers)==null?void 0:N.email),1)):V("",!0),(s=(D=t.value)==null?void 0:D.sellers)!=null&&s.phone?(o(),_("p",ze," Telefono: "+w((f=(m=t.value)==null?void 0:m.sellers)==null?void 0:f.phone),1)):V("",!0),(z=t.value)!=null&&z.sellers&&((X=(U=t.value)==null?void 0:U.sellers)!=null&&X.tickets)?(o(),_("div",Fe,[Pe,Se,c("div",Re,[(o(!0),_(S,null,R((G=(q=t.value)==null?void 0:q.sellers)==null?void 0:G.tickets,H=>(o(),_("div",{key:H.id,class:"min-w-12 min-h-12 w-12 h-12 rounded-full border bg-background-elevated flex flex-col justify-center items-center"},[c("span",null,w(H.number),1)]))),128))])])):V("",!0)])])])}}}),Me={class:"w-full flex flex-col items-center"},Ae={class:"flex flex-col w-full max-w-3xl gap-4"},Ee={class:"grow relative"},Ue={class:"w-full flex flex-col gap-0 items-stretch"},Xe={className:"bg-secondary/50 border border-b-0 rounded-t-lg py-2 px-4 flex flex-row items-center justify-between"},qe=c("h2",{className:"text-3xl py-2 "},"Numeración disponible",-1),Ge={key:0,className:"p-2 border rounded-b-lg grid grid-cols-5 @xl:grid-cols-10 gap-x-2 gap-y-2 place-items-center"},He={className:"p-2 border rounded-b-lg grid grid-cols-5 @xl:grid-cols-10 gap-x-2 gap-y-2 place-items-center"},tt=b({__name:"RaffleView",setup(i){const l=ne(),d=v(),t=v([]),u=v(null),a=v("all"),p=v(""),g=v(!1),k=v(!1),y=v(!1),$=v(null),C=v(null),I=O(()=>t.value.filter(s=>N(s)&&T(s))),T=s=>p.value.trim()===""||s.number.toLowerCase().includes(p.value.toLowerCase()),N=s=>{switch(a.value){case"available":return s.seller_id===null;case"unavailable":return s.seller_id!==null;default:return!0}},D=s=>{u.value=s,ce(()=>{y.value=!0})};return re($,([{isIntersecting:s}])=>{k.value=!s},{rootMargin:"-65px",threshold:1}),J(async()=>{g.value=!0,await ue(Number(l.currentRoute.value.params.id)).then(s=>{d.value=s}).catch(s=>{console.log(s)}),await fe(Number(l.currentRoute.value.params.id)).then(s=>{t.value=s}).catch(s=>{console.log(s)}).finally(()=>{g.value=!1})}),(s,m)=>(o(),_("div",Me,[c("div",{ref_key:"sentinal",ref:$,class:"w-full h-0"},null,512),c("div",Ae,[c("div",{class:P(["flex flex-col sm:flex-row gap-4 transition-all duration-300 bg-background-elevated/90 backdrop-blur px-4 py-3 border rounded-lg sticky top-16 z-10",{"!bg-background/90 @3xl/main:!bg-background-elevated/90 rounded-none @3xl/main:rounded-b-lg border-t-0 border-x-0 @3xl/main:border-x -mx-4":k.value}])},[c("div",Ee,[n(e(_e),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),n(e(pe),{type:"text",inputmode:"numeric",autocomplete:"off",maxlength:"19",placeholder:"Buscar número",class:"w-full pl-11 pr-4 py-2 text-sm",modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=f=>p.value=f)},null,8,["modelValue"])]),n(e(ge),{"default-value":"all",class:"w-full sm:w-auto"},{default:r(()=>[n(e(be),{class:"w-full"},{default:r(()=>[n(e(F),{value:"all",onClick:m[1]||(m[1]=()=>a.value="all")},{default:r(()=>[B(" Todo ")]),_:1}),n(e(F),{value:"available",onClick:m[2]||(m[2]=()=>a.value="available")},{default:r(()=>[B(" Disponibles ")]),_:1}),n(e(F),{value:"unavailable",onClick:m[3]||(m[3]=()=>a.value="unavailable")},{default:r(()=>[B(" No disponibles ")]),_:1})]),_:1})]),_:1})],2),c("div",Ue,[c("div",Xe,[qe,n(e(me),{class:"w-8 h-8"})]),g.value?(o(),_("div",Ge,[(o(),_(S,null,R(100,f=>n(e(ie),{key:f,class:"w-14 h-14 border rounded-full"})),64))])):V("",!0),c("div",He,[(o(!0),_(S,null,R(I.value,f=>(o(),x(e(K),{key:f.id,variant:"ghost",class:P(["text-lg w-14 h-14 border rounded-full",{"bg-background-elevated border border-destructive":f.seller_id!==null}]),onClick:z=>D(f)},{default:r(()=>[B(w(f.number),1)]),_:2},1032,["class","onClick"]))),128))])])]),n(e(xe),{ref_key:"overviewDialog",ref:C,open:y.value,"onUpdate:open":m[4]||(m[4]=f=>y.value=f)},{default:r(()=>[n(e(we),{class:"transition-[opacity,_transform] gap-0 p-0 max-w-2xl w-[calc(100vw-2rem)] max-h-[calc(100dvh-2rem)] rounded-lg grid-rows-[auto_minmax(0,1fr)_auto]"},{default:r(()=>{var f;return[n(Le,{class:"p-6",ticketId:(f=u.value)==null?void 0:f.id},null,8,["ticketId"]),n(e(ke),{class:"p-6 pt-0"},{default:r(()=>[n(e(he),{"as-child":""},{default:r(()=>[n(e(K),{type:"button",variant:"secondary"},{default:r(()=>[B(" Cerrar ")]),_:1})]),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]))}});export{tt as default};
