import{m as O,o as g,c as w,a as h,d as f,r as i,z as d,a1 as V,j as C,n as p,b9 as v,k as H,aD as u,p as _}from"./index-BpvGhyvb.js";import{b as A,a as F}from"./thumbHash-Ci89Ad7b.js";import{_ as q}from"./Skeleton.vue_vue_type_script_setup_true_lang-Bz-mh4Ay.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},K=h("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.5"},[h("path",{d:"m2 8l6 2M6 4l2 3"}),h("path",{d:"m11 6.563l3.7-3.625c1.46-1.43 4.063-1.199 5.815.517c1.751 1.716 1.988 4.267.528 5.697L18.136 12M15 15.587L10.965 20c-1.392 1.524-3.876 1.277-5.548-.552c-1.67-1.828-1.897-4.546-.504-6.07L6.173 12",opacity:".5"})],-1),Q=[K];function W(s,e){return g(),w("svg",J,[...Q])}const X=O({name:"solar-link-broken-line-duotone",render:W}),Y=["src","alt","title","crossorigin","sizes","srcset"],Z="flex flex-col justify-center items-center rounded-md p-4",ee="flex flex-col justify-center items-center border border-dashed border-destructive rounded-md p-4 text-center text-destructive",se="animate-brightness",te=f({props:{class:{type:String,default:""}},setup(s){return()=>u(q,{class:_(Z,s.class)})}}),re=f({props:{src:{type:String,default:""},class:{type:String,default:""},style:{type:String,default:""},alt:{type:String,default:""},title:{type:String,default:""},crossorigin:{type:String,default:""},sizes:{type:String,default:""},srcset:{type:String,default:""}},setup(s){return()=>u("img",{src:s.src,class:_(se,s.class),style:s.style,alt:s.alt,title:s.title,crossorigin:s.crossorigin,sizes:s.sizes,srcset:s.srcset})}}),ae=f({props:{class:{type:String,default:""}},setup(s){return()=>u("div",{class:_(ee,s.class)},[u(X,{class:"w-3/5 min-w-[3rem] max-w-[5rem] h-auto"})])}}),le=f({props:{src:{type:String,default:""},class:{type:String,default:""},style:{type:String,default:""},alt:{type:String,default:""},title:{type:String,default:""}},setup(s){return()=>u("img",{src:s.src,class:s.class,style:s.style,alt:s.alt,title:s.title})}}),oe=f({__name:"LazyImg",props:{src:{},thumbHash:{},placeholder:{default:te},errorPlaceholder:{default:ae},class:{},style:{},loading:{},alt:{},title:{},crossorigin:{},sizes:{},srcset:{},referrerPolicy:{},delay:{}},setup(s){const e=s,m=i(null),b=i(null),L=i(null),P=i(!0),I=i(!1),S=d(()=>{if(e.thumbHash){if(typeof e.thumbHash=="string")return A(e.thumbHash);if(e.thumbHash instanceof Uint8Array)return F(e.thumbHash)}}),E=d(()=>e.thumbHash||typeof e.placeholder=="string"?re:e.placeholder),B=d(()=>{if(S.value)return S.value;if(typeof e.placeholder=="string")return e.placeholder}),D=d(()=>typeof e.errorPlaceholder=="string"?le:e.errorPlaceholder),U=d(()=>b.value),$=r=>{const{src:a,data:c,error:t,isLoading:l,isReady:o,...n}=r;a instanceof Promise&&M(a,{data:c,error:t,isLoading:l,isReady:o}),typeof a=="string"&&T({src:a,...n},{data:c,error:t,isLoading:l,isReady:o})},M=(r,a)=>{const{data:c,error:t,isLoading:l,isReady:o}=a;l.value=!0,r.then(n=>{c.value=n,l.value=!1,o.value=!0}).catch(n=>{t.value=n,l.value=!1,o.value=!0}).finally(()=>{l.value=!1,o.value=!0})},T=(r,a)=>{const{data:c,error:t,isLoading:l,isReady:o}=a;l.value=!0,c.value=null,t.value=null,o.value=!1,j(r).then(n=>{c.value=n.src}).catch(n=>{t.value=n}).finally(()=>{l.value=!1,o.value=!0})},j=async r=>new Promise((a,c)=>{const t=new Image,{src:l,srcset:o,sizes:n,class:k,loading:z,crossorigin:R,referrerPolicy:x}=r;t.src=l,o&&(t.srcset=o),n&&(t.sizes=n),k&&(t.className=k),z&&(t.loading=z),R&&(t.crossOrigin=R),x&&(t.referrerPolicy=x),t.onload=()=>a(t),t.onerror=c}),y=new IntersectionObserver(r=>{r.forEach(a=>{a.isIntersecting&&N()})},{root:null,rootMargin:"0px",threshold:.5}),N=()=>{var r,a;console.log("El elemento estÃ¡ en el viewport"),$({src:e.src,data:b,error:L,isLoading:P,isReady:I,alt:e.alt,class:e.class,crossorigin:e.crossorigin,referrerPolicy:e.referrerPolicy,loading:e.loading,sizes:e.sizes,srcset:e.srcset}),(r=m.value)!=null&&r.$el&&y.unobserve((a=m.value)==null?void 0:a.$el),y.disconnect()};return V(()=>{var r;y.observe((r=m.value)==null?void 0:r.$el)}),(r,a)=>P.value?(g(),C(H(E.value),{key:0,src:B.value,class:p(e.class),style:v(e.style),ref_key:"placeHolderElement",ref:m},null,8,["src","class","style"])):L.value?(g(),C(H(D.value),{key:1,src:typeof e.errorPlaceholder=="string"?e.errorPlaceholder:void 0,class:p(e.class),style:v(e.style)},null,8,["src","class","style"])):(g(),w("img",{key:2,src:U.value,class:p(e.class),style:v(e.style),alt:e.alt,title:e.title,crossorigin:e.crossorigin,sizes:e.sizes,srcset:e.srcset},null,14,Y))}}),ue=G(oe,[["__scopeId","data-v-6790d00e"]]);export{ue as L};
