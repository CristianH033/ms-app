import{d as b,x as M,o,j as x,w as r,v as h,y as R,z as E,e,A as W,l as V,I as Y,B as A,C as z,D as Z,E as ee,G as te,H as X,b as n,J as se,K as ae,L as le,a as i,c as _,n as F,M as oe,r as v,q as J,t as w,N as O,F as S,i as L,O as ne,p as re,P as B,_ as U,Q as ie}from"./index-DzBWQBNt.js";import{_ as ce}from"./Skeleton.vue_vue_type_script_setup_true_lang-CQdCrKHT.js";import{c as de,a as ue}from"./createLucideIcon-BNtvBa0W.js";import{g as pe}from"./tickets-HmeSw_iL.js";import{_ as fe}from"./Input.vue_vue_type_script_setup_true_lang-Ddd7xP5A.js";import{S as me}from"./ticket-line-duotone-DyTtdPwP.js";import{S as _e}from"./magnifer-outline-BXtTU3gn.js";const ve=de("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ge=b({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(c,{emit:l}){const u=M(c,l);return(a,f)=>(o(),x(e(W),R(E(e(u))),{default:r(()=>[h(a.$slots,"default")]),_:3},16))}}),j=b({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(c){const l=c,d=V(()=>{const{class:u,...a}=l;return a}),t=Y(d);return(u,a)=>(o(),x(e(Z),A(e(t),{class:e(z)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",l.class)}),{default:r(()=>[h(u.$slots,"default")]),_:3},16,["class"]))}}),be=b({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(c){const l=c,d=V(()=>{const{class:t,...u}=l;return u});return(t,u)=>(o(),x(e(ee),A(d.value,{class:e(z)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",l.class)}),{default:r(()=>[h(t.$slots,"default")]),_:3},16,["class"]))}}),xe=b({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(c,{emit:l}){const u=M(c,l);return(a,f)=>(o(),x(e(te),R(E(e(u))),{default:r(()=>[h(a.$slots,"default")]),_:3},16))}}),he=b({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(c){const l=c;return(d,t)=>(o(),x(e(X),R(E(l)),{default:r(()=>[h(d.$slots,"default")]),_:3},16))}}),ye=i("span",{class:"sr-only"},"Close",-1),we=b({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:l}){const d=c,t=l,u=V(()=>{const{class:f,...g}=d;return g}),a=M(u,t);return(f,g)=>(o(),x(e(le),null,{default:r(()=>[n(e(se),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),n(e(ae),A(e(a),{class:e(z)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",d.class)}),{default:r(()=>[h(f.$slots,"default"),n(e(X),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:r(()=>[n(e(ve),{class:"w-4 h-4"}),ye]),_:1})]),_:3},16,["class"])]),_:3}))}}),ke=b({__name:"DialogFooter",props:{class:{}},setup(c){const l=c;return(d,t)=>(o(),_("div",{class:F(e(z)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",l.class))},[h(d.$slots,"default")],2))}}),$e={class:"w-full @container/ticketInfo"},Be={class:"relative flex w-full flex-col gap-2 overflow-hidden @md/ticketInfo:flex-row @md/ticketInfo:gap-8"},Ce={class:"min-w-auto flex flex-col items-center justify-center"},Ie={class:"flex h-28 w-28 flex-col items-center justify-center rounded-full border bg-background-elevated"},Te={class:"text-3xl"},De={class:"flex min-w-0 flex-col gap-2"},Ne=i("h2",{class:"my-2 text-2xl"},"Información del boleto",-1),Oe={key:0,class:"capitalize"},Ve={key:1,class:"text-sm"},ze={key:2,class:"text-sm"},Pe={key:3,class:"text-sm"},je={key:4,class:"flex w-full flex-col gap-2"},Fe=i("hr",{class:""},null,-1),Se=i("label",{class:""},"Otros boletos del vendedor:",-1),Le={class:"flex flex-row gap-2 overflow-x-auto rounded-md border p-2"},Me=b({__name:"TicketInfo",props:{ticketId:{}},setup(c){const l=oe.from("tickets").select("*, sellers(*, tickets(*))"),d=c,t=v(),u=async()=>{const{data:a,error:f}=await l.eq("id",d.ticketId).single();return f&&console.error(f),console.log(a),a};return J(async()=>{await u().then(a=>t.value=a).catch(a=>console.error(a)).finally(()=>{})}),(a,f)=>{var g,k,y,$,C,I,T,D,N,s,m,p,P,q,G,H,K;return o(),_("div",$e,[i("div",Be,[i("div",Ce,[i("div",Ie,[i("span",Te,w((g=t.value)==null?void 0:g.number),1)])]),i("div",De,[Ne,(k=t.value)!=null&&k.sellers?(o(),_("p",Oe," Vendedor: "+w(($=(y=t.value)==null?void 0:y.sellers)==null?void 0:$.name),1)):(o(),_("p",Ve,"El Boleto no tiene un vendedor asignado")),(I=(C=t.value)==null?void 0:C.sellers)!=null&&I.email?(o(),_("p",ze," Email: "+w((D=(T=t.value)==null?void 0:T.sellers)==null?void 0:D.email),1)):O("",!0),(s=(N=t.value)==null?void 0:N.sellers)!=null&&s.phone?(o(),_("p",Pe," Telefono: "+w((p=(m=t.value)==null?void 0:m.sellers)==null?void 0:p.phone),1)):O("",!0),(P=t.value)!=null&&P.sellers&&((G=(q=t.value)==null?void 0:q.sellers)!=null&&G.tickets)?(o(),_("div",je,[Fe,Se,i("div",Le,[(o(!0),_(S,null,L((K=(H=t.value)==null?void 0:H.sellers)==null?void 0:K.tickets,Q=>(o(),_("div",{key:Q.id,class:"flex h-12 min-h-12 w-12 min-w-12 flex-col items-center justify-center rounded-full border bg-background-elevated"},[i("span",null,w(Q.number),1)]))),128))])])):O("",!0)])])])}}}),Re={class:"flex w-full flex-col items-center"},Ee={class:"flex w-full max-w-3xl flex-col gap-4"},Ae={class:"relative grow"},qe={class:"flex w-full flex-col items-stretch gap-0"},Ge={className:"bg-secondary/50 border border-b-0 rounded-t-lg py-2 px-4 flex flex-row items-center justify-between"},He=i("h2",{className:"text-3xl py-2 "},"Numeración disponible",-1),Ke={key:0,className:"p-2 border rounded-b-lg grid grid-cols-5 @xl:grid-cols-10 gap-x-2 gap-y-2 place-items-center"},Qe={className:"p-2 border rounded-b-lg grid grid-cols-5 @xl:grid-cols-10 gap-x-2 gap-y-2 place-items-center"},tt=b({__name:"RaffleView",setup(c){const l=ne(),d=v(),t=v([]),u=v(null),a=v("all"),f=v(""),g=v(!1),k=v(!1),y=v(!1),$=v(null),C=v(null),I=V(()=>t.value.filter(s=>D(s)&&T(s))),T=s=>f.value.trim()===""||s.number.toLowerCase().includes(f.value.toLowerCase()),D=s=>{switch(a.value){case"available":return s.seller_id===null;case"unavailable":return s.seller_id!==null;default:return!0}},N=s=>{u.value=s,ie(()=>{y.value=!0})};return re($,([{isIntersecting:s}])=>{k.value=!s},{rootMargin:"-65px",threshold:1}),J(async()=>{g.value=!0,await ue(Number(l.currentRoute.value.params.id)).then(s=>{d.value=s}).catch(s=>{console.log(s)}),await pe(Number(l.currentRoute.value.params.id)).then(s=>{t.value=s}).catch(s=>{console.log(s)}).finally(()=>{g.value=!1})}),(s,m)=>(o(),_("div",Re,[i("div",{ref_key:"sentinal",ref:$,class:"h-0 w-full"},null,512),i("div",Ee,[i("div",{class:F(["sticky top-16 z-10 flex flex-col gap-4 rounded-lg border bg-background-elevated/90 px-4 py-3 backdrop-blur transition-all duration-300 sm:flex-row",{"-mx-4 rounded-none border-x-0 border-t-0 !bg-background/90 @3xl/main:rounded-b-lg @3xl/main:border-x @3xl/main:!bg-background-elevated/90":k.value}])},[i("div",Ae,[n(e(_e),{class:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2"}),n(e(fe),{type:"text",inputmode:"numeric",autocomplete:"off",maxlength:"19",placeholder:"Buscar número",class:"w-full py-2 pl-11 pr-4 text-sm",modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=p=>f.value=p)},null,8,["modelValue"])]),n(e(ge),{"default-value":"all",class:"w-full sm:w-auto"},{default:r(()=>[n(e(be),{class:"w-full"},{default:r(()=>[n(e(j),{value:"all",onClick:m[1]||(m[1]=()=>a.value="all")},{default:r(()=>[B(" Todo ")]),_:1}),n(e(j),{value:"available",onClick:m[2]||(m[2]=()=>a.value="available")},{default:r(()=>[B(" Disponibles ")]),_:1}),n(e(j),{value:"unavailable",onClick:m[3]||(m[3]=()=>a.value="unavailable")},{default:r(()=>[B(" No disponibles ")]),_:1})]),_:1})]),_:1})],2),i("div",qe,[i("div",Ge,[He,n(e(me),{class:"h-8 w-8"})]),g.value?(o(),_("div",Ke,[(o(),_(S,null,L(100,p=>n(e(ce),{key:p,class:"h-14 w-14 rounded-full border"})),64))])):O("",!0),i("div",Qe,[(o(!0),_(S,null,L(I.value,p=>(o(),x(e(U),{key:p.id,variant:"ghost",class:F(["h-14 w-14 rounded-full border text-lg",{"border border-destructive bg-background-elevated":p.seller_id!==null}]),onClick:P=>N(p)},{default:r(()=>[B(w(p.number),1)]),_:2},1032,["class","onClick"]))),128))])])]),n(e(xe),{ref_key:"overviewDialog",ref:C,open:y.value,"onUpdate:open":m[4]||(m[4]=p=>y.value=p)},{default:r(()=>[n(e(we),{class:"max-h-[calc(100dvh-2rem)] w-[calc(100vw-2rem)] max-w-2xl grid-rows-[auto_minmax(0,1fr)_auto] gap-0 rounded-lg p-0 transition-[opacity,_transform]"},{default:r(()=>{var p;return[n(Me,{class:"p-6",ticketId:(p=u.value)==null?void 0:p.id},null,8,["ticketId"]),n(e(ke),{class:"p-6 pt-0"},{default:r(()=>[n(e(he),{"as-child":""},{default:r(()=>[n(e(U),{type:"button",variant:"secondary"},{default:r(()=>[B(" Cerrar ")]),_:1})]),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]))}});export{tt as default};
