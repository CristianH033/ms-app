import{_ as $}from"./RafflesList.vue_vue_type_script_setup_true_lang-L97cRuIf.js";import{S as g}from"./add-circle-line-duotone-CneLTe2h.js";import{g as C}from"./raffles-CbMAmrOt.js";import{d as V,r as o,l as D,m as N,p as R,q as B,o as c,c as L,a as l,n as A,b as e,e as a,w as s,_ as m,s as w,v as F,j as _,S as M}from"./index-YYdFRp64.js";import{_ as O}from"./RaffleForm.vue_vue_type_script_setup_true_lang-B22FFrH1.js";import{S as U}from"./magnifer-outline-m3nkLg67.js";import{S as j}from"./ticket-line-duotone-fvfCvdRK.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-C1EFwQSn.js";import{_ as T,a as q,b as E,c as H,d as I}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-CrpSbZ9E.js";import{_ as G,a as J,b as K}from"./AlertDialogCancel.vue_vue_type_script_setup_true_lang-CMS2PJN5.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-Cf-IwMg_.js";import"./cup-star-line-duotone-DLeTlHFO.js";import"./user-speak-line-duotone-C56M6pjF.js";import"./FormMessage.vue_vue_type_script_setup_true_lang-0elhWVA_.js";import"./DrawForm.vue_vue_type_script_setup_true_lang-jgEZxb25.js";import"./createLucideIcon-DmtT-4tQ.js";import"./v4-CGkutoHE.js";const P={class:"w-full flex flex-col items-center"},Q={class:"flex flex-col w-full max-w-3xl gap-4"},W={class:"grow relative"},X=l("span",{class:"hidden md:inline"},"Nueva rifa",-1),Y={class:"flex flex-row gap-2 justify-start items-center"},Z=l("span",null," Nueva Rifa ",-1),ee={class:"px-6 py-4 overflow-y-auto relative"},ae=l("span",null,"Crear",-1),se={class:"w-full flex flex-col gap-4 items-center"},le=l("div",{class:"w-full flex flex-col items-center"},null,-1),ye=V({__name:"HomeView",setup(te){const f=o(!1),r=o(!1),u=o(""),p=o([]),d=o(!1),v=o(!1),b=o(null),h=D(()=>p.value.filter(t=>t.name.toLowerCase().includes(u.value.toLowerCase())));N(b,([{isIntersecting:t}])=>{v.value=!t},{rootMargin:"-65px",threshold:1});const y=()=>{d.value=!1},S=async()=>{y(),await x()},x=async()=>{f.value=!0,await C().then(t=>{p.value=t}).catch(t=>{console.log(t)}).finally(()=>{f.value=!1})};return R(async()=>{await x()}),(t,n)=>{const k=B("auto-animate");return c(),L("div",P,[l("div",{ref_key:"sentinal",ref:b,class:"w-full h-0"},null,512),l("div",Q,[l("div",{class:A(["flex flex-row gap-4 transition-all duration-300 bg-background-elevated/90 backdrop-blur px-4 py-3 border rounded-lg sticky top-16 z-10",{"!bg-background/90 @3xl/main:!bg-background-elevated/90 rounded-none @3xl/main:rounded-b-lg border-t-0 border-x-0 @3xl/main:border-x -mx-4":v.value}])},[l("div",W,[e(a(U),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5"}),e(z,{type:"text",modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=i=>u.value=i),autocomplete:"off",placeholder:"Search",class:"w-full pl-11 pr-4 py-2 text-sm"},null,8,["modelValue"])]),e(a(I),{open:d.value,"onUpdate:open":n[2]||(n[2]=i=>d.value=i)},{default:s(()=>[e(a(T),{asChild:""},{default:s(()=>[e(a(m),{class:"gap-2"},{default:s(()=>[e(a(g),{class:"w-5 h-5"}),X]),_:1})]),_:1}),e(a(q),{class:"transition-[opacity,_transform] gap-0 p-0 max-w-2xl w-[calc(100vw-2rem)] max-h-[calc(100dvh-2rem)] rounded-lg grid-rows-[auto_minmax(0,1fr)_auto]"},{default:s(()=>[e(a(E),{class:"p-6 pb-4 border-b"},{default:s(()=>[e(a(H),null,{default:s(()=>[l("div",Y,[e(a(j),{class:"w-8 h-8"}),Z])]),_:1}),e(a(G),null,{default:s(()=>[w(" Crea una nueva rifa ")]),_:1})]),_:1}),l("div",ee,[e(O,{withoutActions:"",id:"raffle-form",isSubmiting:r.value,"onUpdate:isSubmiting":n[1]||(n[1]=i=>r.value=i),onSuccess:S},null,8,["isSubmiting"])]),e(a(J),{class:"p-6 pt-4 border-t gap-2"},{default:s(()=>[e(a(K),{"as-child":""},{default:s(()=>[e(a(m),{variant:"secondary",type:"button",disabled:r.value},{default:s(()=>[w("Cancelar")]),_:1},8,["disabled"])]),_:1}),F((c(),_(a(m),{class:"gap-3",form:"raffle-form",type:"submit",disabled:r.value},{default:s(()=>[r.value?(c(),_(a(M),{key:0,class:"h-6 w-6"})):(c(),_(a(g),{key:1,class:"w-6 h-6"})),ae]),_:1},8,["disabled"])),[[k]])]),_:1})]),_:1})]),_:1},8,["open"])],2),l("div",se,[e($,{raffles:h.value,loading:f.value},null,8,["raffles","loading"])])]),le])}}});export{ye as default};
