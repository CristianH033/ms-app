import{e as s,_ as y,a as k}from"./RafflesList.vue_vue_type_script_setup_true_lang-NsR3S7bO.js";import{d as R,r as a,l as h,p as S,q as C,s as V,o as B,c as D,a as o,n as O,b as t,e as c,w as U,_ as $}from"./index-DVOd51A8.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-BXRwYxYR.js";import{g as L}from"./createLucideIcon-BfklrHUi.js";import{S as M}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-BZCjDQ1a.js";import{S as N}from"./magnifer-outline-DBrvnUQV.js";import"./SelectScrollDownButton.vue_vue_type_script_setup_true_lang-DsKVjY7P.js";import"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-DZszUY9n.js";import"./ImageInput.vue_vue_type_script_setup_true_lang-DaIIbEtj.js";import"./thumbHash-Ci89Ad7b.js";import"./ticket-line-duotone-BmhFyQOw.js";import"./user-speak-line-duotone-sH-5SRJK.js";import"./vee-validate-zod.esm-DJ9wuxOA.js";import"./AlertDialogCancel.vue_vue_type_script_setup_true_lang-DBQtl7KJ.js";import"./LazyImg-BcIU0mzV.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-BKH7XQvu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CardContent.vue_vue_type_script_setup_true_lang-_m5mB9Nw.js";import"./CardFooter.vue_vue_type_script_setup_true_lang-D7Z4ruQV.js";const q={class:"flex w-full flex-col items-center"},A={class:"flex w-full max-w-3xl flex-col gap-4"},E={class:"relative grow"},F={class:"flex w-full flex-col items-center gap-4"},re=R({__name:"HomeView",setup(H){const f=a(!1),m=a(!1),u=a(""),p=a([]),r=a(!1),v=a(!1),g=a(null),w=h(()=>p.value.filter(l=>l.raffle_name.toLowerCase().includes(u.value.toLowerCase())));S(g,([{isIntersecting:l}])=>{v.value=!l},{rootMargin:"-65px",threshold:1});const _=()=>{r.value=!0},x=()=>{r.value=!1},i=async()=>{x(),await d()},b=async()=>{console.log("On delete, reload raffles"),x(),await d()},d=async()=>{f.value=!0,await L().then(l=>{p.value=l}).catch(l=>{console.log(l)}).finally(()=>{f.value=!1})};return s.on("createRaffle",i),s.on("updateRaffle",i),s.on("deleteRaffle",b),C(async()=>{await d()}),V(()=>{s.off("createRaffle",i),s.off("updateRaffle",i),s.off("deleteRaffle",b)}),(l,e)=>(B(),D("div",q,[o("div",{ref_key:"sentinal",ref:g,class:"h-0 w-full"},null,512),o("div",A,[o("div",{class:O(["sticky top-16 z-10 flex flex-row gap-4 rounded-lg border bg-background-elevated/90 px-4 py-3 backdrop-blur transition-all duration-300",{"-mx-4 rounded-none border-x-0 border-t-0 !bg-background/90 @3xl/main:rounded-b-lg @3xl/main:border-x @3xl/main:!bg-background-elevated/90":v.value}])},[o("div",E,[t(c(N),{class:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2"}),t(z,{type:"text",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),autocomplete:"off",placeholder:"Buscar",class:"w-full py-2 pl-11 pr-4 text-sm"},null,8,["modelValue"])]),t(c($),{class:"gap-2",onClick:_},{default:U(()=>[t(c(M),{class:"h-5 w-5"}),e[3]||(e[3]=o("span",{class:"hidden md:inline"},"Nueva rifa",-1))]),_:1})],2),o("div",F,[t(y,{raffles:w.value,loading:f.value},null,8,["raffles","loading"])])]),e[4]||(e[4]=o("div",{class:"flex w-full flex-col items-center"},null,-1)),t(k,{open:r.value,"onUpdate:open":e[1]||(e[1]=n=>r.value=n),"is-submiting":m.value,"onUpdate:isSubmiting":e[2]||(e[2]=n=>m.value=n)},null,8,["open","is-submiting"])]))}});export{re as default};
