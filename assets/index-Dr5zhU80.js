import{d as W,r as E,aC as z,aJ as q,y as C,aK as L,Z as x,aL as M,aM as B,aN as b,aO as U,aP as F,aQ as X,aR as j,aS as R,aT as J}from"./index-DWUfbFQb.js";function H(t){var r;const e=L(t);return(r=e==null?void 0:e.$el)!=null?r:e}const K=J?window:void 0;function P(...t){let r,e,n,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,n,u]=t,r=K):[r,e,n,u]=t,!r)return M;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const a=[],c=()=>{a.forEach(i=>i()),a.length=0},l=(i,m,g,h)=>(i.addEventListener(m,g,h),()=>i.removeEventListener(m,g,h)),f=x(()=>[H(r),L(u)],([i,m])=>{if(c(),!i)return;const g=B(m)?{...m}:m;a.push(...e.flatMap(h=>n.map(w=>l(i,h,w,g))))},{immediate:!0,flush:"post"}),s=()=>{f(),c()};return b(s),s}const Q=500,V=10;function Z(t,r,e){var n,u;const a=C(()=>H(t));let c,l,f,s=!1;function i(){c&&(clearTimeout(c),c=void 0),l=void 0,f=void 0,s=!1}function m(o){var v,y,d;const[p,_,O]=[f,l,s];if(i(),!(e!=null&&e.onMouseUp)||!_||!p||(v=e==null?void 0:e.modifiers)!=null&&v.self&&o.target!==a.value)return;(y=e==null?void 0:e.modifiers)!=null&&y.prevent&&o.preventDefault(),(d=e==null?void 0:e.modifiers)!=null&&d.stop&&o.stopPropagation();const T=o.x-_.x,I=o.y-_.y,Y=Math.sqrt(T*T+I*I);e.onMouseUp(o.timeStamp-p,Y,O)}function g(o){var v,y,d,p;(v=e==null?void 0:e.modifiers)!=null&&v.self&&o.target!==a.value||(i(),(y=e==null?void 0:e.modifiers)!=null&&y.prevent&&o.preventDefault(),(d=e==null?void 0:e.modifiers)!=null&&d.stop&&o.stopPropagation(),l={x:o.x,y:o.y},f=o.timeStamp,c=setTimeout(()=>{s=!0,r(o)},(p=e==null?void 0:e.delay)!=null?p:Q))}function h(o){var v,y,d,p;if((v=e==null?void 0:e.modifiers)!=null&&v.self&&o.target!==a.value||!l||(e==null?void 0:e.distanceThreshold)===!1)return;(y=e==null?void 0:e.modifiers)!=null&&y.prevent&&o.preventDefault(),(d=e==null?void 0:e.modifiers)!=null&&d.stop&&o.stopPropagation();const _=o.x-l.x,O=o.y-l.y;Math.sqrt(_*_+O*O)>=((p=e==null?void 0:e.distanceThreshold)!=null?p:V)&&i()}const w={capture:(n=e==null?void 0:e.modifiers)==null?void 0:n.capture,once:(u=e==null?void 0:e.modifiers)==null?void 0:u.once},D=[P(a,"pointerdown",g,w),P(a,"pointermove",h,w),P(a,["pointerup","pointerleave"],m,w)];return()=>D.forEach(o=>o())}const le=W({name:"OnLongPress",props:["as","options"],emits:["trigger"],setup(t,{slots:r,emit:e}){const n=E();return Z(n,u=>{e("trigger",u)},t.options),()=>{if(r.default)return z(t.as||"div",{ref:n},r.default())}}});function $(t,r,e){const{immediate:n=!0,delay:u=0,onError:a=M,onSuccess:c=M,resetOnExecute:l=!0,shallow:f=!0,throwError:s}=e??{},i=f?U(r):E(r),m=E(!1),g=E(!1),h=U(void 0);async function w(o=0,...v){l&&(i.value=r),h.value=void 0,m.value=!1,g.value=!0,o>0&&await X(o);const y=typeof t=="function"?t(...v):t;try{const d=await y;i.value=d,m.value=!0,c(d)}catch(d){if(h.value=d,a(d),s)throw d}finally{g.value=!1}return i.value}n&&w(u);const D={state:i,isReady:m,isLoading:g,error:h,execute:w};function k(){return new Promise((o,v)=>{j(g).toBe(!1).then(()=>o(D)).catch(v)})}return{...D,then(o,v){return k().then(o,v)}}}async function G(t){return new Promise((r,e)=>{const n=new Image,{src:u,srcset:a,sizes:c,class:l,loading:f,crossorigin:s,referrerPolicy:i}=t;n.src=u,a&&(n.srcset=a),c&&(n.sizes=c),l&&(n.className=l),f&&(n.loading=f),s&&(n.crossOrigin=s),i&&(n.referrerPolicy=i),n.onload=()=>r(n),n.onerror=e})}function ee(t,r={}){const e=$(()=>G(L(t)),void 0,{resetOnExecute:!0,...r});return x(()=>L(t),()=>e.execute(r.delay),{deep:!0}),e}const ae=W({name:"UseImage",props:["src","srcset","sizes","as","alt","class","loading","crossorigin","referrerPolicy"],setup(t,{slots:r}){const e=q(ee(t));return()=>e.isLoading&&r.loading?r.loading(e):e.error&&r.error?r.error(e.error):r.default?r.default(e):z(t.as||"img",t)}});function S(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function N(t){const r=window.getComputedStyle(t);if(r.overflowX==="scroll"||r.overflowY==="scroll"||r.overflowX==="auto"&&t.clientWidth<t.scrollWidth||r.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!e||e.tagName==="BODY"?!1:N(e)}}function te(t){const r=t||window.event,e=r.target;return N(e)?!1:r.touches.length>1?!0:(r.preventDefault&&r.preventDefault(),!1)}const A=new WeakMap;function re(t,r=!1){const e=E(r);let n=null,u="";x(F(t),l=>{const f=S(L(l));if(f){const s=f;if(A.get(s)||A.set(s,s.style.overflow),s.style.overflow!=="hidden"&&(u=s.style.overflow),s.style.overflow==="hidden")return e.value=!0;if(e.value)return s.style.overflow="hidden"}},{immediate:!0});const a=()=>{const l=S(L(t));!l||e.value||(R&&(n=P(l,"touchmove",f=>{te(f)},{passive:!1})),l.style.overflow="hidden",e.value=!0)},c=()=>{const l=S(L(t));!l||!e.value||(R&&(n==null||n()),l.style.overflow=u,A.delete(l),e.value=!1)};return b(c),C({get(){return e.value},set(l){l?a():c()}})}function ne(){let t=!1;const r=E(!1);return(e,n)=>{if(r.value=n.value,t)return;t=!0;const u=re(e,n.value);x(r,a=>u.value=a)}}ne();export{le as O,ae as U};
