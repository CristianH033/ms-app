import{_ as be}from"./SellersList.vue_vue_type_script_setup_true_lang-DrROvTnc.js";import{S as L,_ as De,a as Te,b as Se,c as xe,d as ke}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-ChD8eHFR.js";import{_ as Ne}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-CIIGZnoH.js";import{d as ce,r as k,l as Ze,q as fe,h as de,Q as Ye,o as D,c as x,a as $,b as h,w as g,e as m,O as H,B as Ce,_ as I,M as te,F as Pe,i as Fe,S as A,t as N,j,U as Ie,V as He,m as Ee,N as Ae,L as Le}from"./index-B4iZ3EM6.js";import{_ as Re,a as Ue,b as je,c as Ve}from"./CardContent.vue_vue_type_script_setup_true_lang-BIZxEPo9.js";import{g as me,a as We}from"./sellers-2xD1Se56.js";import{_ as qe,a as Be,b as ze,c as Oe,d as Ke,e as Je,f as Qe,g as Ge,S as Xe}from"./SelectScrollDownButton.vue_vue_type_script_setup_true_lang-BfjcxiP0.js";import{t as et,z as V,u as tt,_ as W,a as ne,b as re,c as se,F as ae}from"./vee-validate-zod.esm-BTr_lng6.js";import{b as nt}from"./createLucideIcon-Vm7LUWeW.js";import"./Input.vue_vue_type_script_setup_true_lang-Dj58SJsf.js";import"./magnifer-outline-bU4cWGyy.js";import"./strings-BzWVocVB.js";const rt=["disabled"],st={class:"flex flex-row gap-2"},at={key:0,class:"p-4",value:""},ot={style:{position:"relative"}},it={key:0,role:"alert",id:"radix-136-form-item-message",class:"text-sm font-medium text-destructive",type:"error"},lt=ce({__name:"AddSellerToRaffleForm",props:{raffleId:{default:1}},emits:["submit","cancel","success","error"],setup(e,{emit:t}){const r=e,s=t,n=k(!1),a=k([]),c=Ze(()=>n.value),f=k(null),d=et(V.object({seller_id:V.string({required_error:"El vendedor es requerido"}).refine(l=>{var i;return(i=a.value)==null?void 0:i.some(M=>M.id.toString()===l)},{message:"El vendedor no existe"}),ticket_price:V.string({required_error:"El valor es requerido"}).transform(l=>parseFloat(l)).refine(l=>!isNaN(l)&&l>=1,{message:"El valor debe ser un nÃºmero mayor o igual a 1"})})),{handleSubmit:v}=tt({validationSchema:d,initialValues:{}}),o=()=>{s("cancel")},u=v(async l=>{s("submit"),n.value=!0,f.value=null,await nt(r.raffleId,Number(l.seller_id),Number(l.ticket_price)).then(i=>{s("success"),console.log(i)}).catch(i=>{s("error"),console.error(i),f.value=i.message}).finally(()=>{n.value=!1})},({errors:l})=>{console.log(l)}),p=async()=>{n.value=!0,me().then(l=>{a.value=l}).catch(l=>{console.error(l)}).finally(()=>{n.value=!1})};return fe(async()=>{await p()}),(l,i)=>{const M=de("RouterLink"),w=Ye("auto-animate");return D(),x("form",{onSubmit:i[0]||(i[0]=He((..._)=>m(u)&&m(u)(..._),["prevent"]))},[$("fieldset",{disabled:c.value},[h(m(ae),{name:"seller_id"},{default:g(({componentField:_})=>[h(m(W),null,{default:g(()=>[h(m(ne),null,{default:g(()=>i[1]||(i[1]=[H("Vendedor")])),_:1}),h(m(qe),Ce(_,{required:""}),{default:g(()=>[h(m(re),null,{default:g(()=>[$("div",st,[h(m(Be),null,{default:g(()=>[h(m(ze),{placeholder:"Elige un vendedor"})]),_:1}),h(M,{to:{name:"sellers"}},{default:g(({navigate:b})=>[h(m(I),{variant:"outline",type:"button",onClick:b},{default:g(()=>[h(m(L),{class:"h-6 w-6"})]),_:2},1032,["onClick"])]),_:1})])]),_:1}),h(m(Oe),null,{default:g(()=>[h(m(Ke),null,{default:g(()=>[h(m(Je),null,{default:g(()=>i[2]||(i[2]=[H("Vendedores")])),_:1}),a.value.length===0?(D(),x("div",at,"No hay vendedores")):te("",!0),(D(!0),x(Pe,null,Fe(a.value,b=>(D(),j(m(Ge),{key:b.id,value:b.id.toString(),class:"capitalize"},{default:g(()=>[H(N(b.name)+" - "+N(b.phone),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:2},1040),A((D(),x("div",null,[h(m(se))])),[[w]])]),_:2},1024)]),_:1}),h(m(ae),{name:"ticket_price"},{default:g(({value:_,handleChange:b})=>[h(m(W),null,{default:g(()=>[h(m(ne),null,{default:g(()=>i[3]||(i[3]=[H("Establezca el valor del bono para el vendedor")])),_:1}),h(m(re),null,{default:g(()=>[h(Qe,{"model-value":_,"onUpdate:modelValue":U=>b(U,!0),required:""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),A((D(),x("div",null,[h(m(se))])),[[w]])]),_:2},1024)]),_:1}),A((D(),x("div",ot,[f.value!==null?(D(),x("p",it,N(f.value),1)):te("",!0)])),[[w]]),h(m(W),{class:"flex w-full flex-col-reverse items-center justify-end gap-2 space-y-0 py-2 md:flex-row"},{default:g(()=>[h(m(I),{type:"button",class:"w-full gap-2",variant:"outline",onClick:o},{default:g(()=>i[4]||(i[4]=[$("span",null,"Cancelar",-1)])),_:1}),h(m(I),{type:"submit",class:"w-full gap-2"},{default:g(()=>[A((D(),x("div",null,[n.value?(D(),j(m(Ie),{key:0,class:"h-6 w-6"})):(D(),j(m(L),{key:1,class:"h-6 w-6"}))])),[[w]]),i[5]||(i[5]=$("span",null,"Asignar",-1))]),_:1})]),_:1})],8,rt)],32)}}}),ut={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ct(e,t){return D(),x("svg",ut,t[0]||(t[0]=[$("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m9 5l6 7l-6 7"},null,-1)]))}const ft=Ee({name:"solar-alt-arrow-right-line-duotone",render:ct});var he=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function dt(e){const t=e.match(he);if(t){const r=Number(t[2]);if(r<1||r>12)return!1;if(typeof t[3]!==void 0){const s=Number(t[3]);if(s<1||s>31)return!1}if(typeof t[4]!==void 0){const s=Number(t[4]);if(s<0||s>23)return!1}return!0}return!1}function mt(e){const t=e.match(he);return t&&typeof t[4]>"u"?e+="T00:00:00":e}function C(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(e=e.trim(),dt(e))return new Date(mt(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}function ht(e){const t=C(e);return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t}function gt(e){return ht(e).getDate()}var z="1999-03-04T02:05:01.000Z",q=new Map,O=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],K=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],J=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],R={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function ge(e){if(/^[+-]\d{2}:\d{2}/.test(e))return 6;if(/^[+-]\d{4}/.test(e))return 5;throw new Error("Invalid offset format")}var vt=["MMMM","MMM","dddd","ddd"],y=new Map([...O,...K,...J].map(e=>[e[0],e])),oe=new Map,ve=["full","long","medium","short"],Y=e=>String(e).padStart(2,"0"),B=e=>String(e).padStart(2,"0");function Z(e){return e.type==="literal"&&(e.value=e.value.normalize("NFKC")),e}function pt(e,t,r,s=!1,n=null){const a=_t(e,t,r,s),c=C(e);function f({partName:d,partValue:v,token:o}){if(d==="literal")return v;const u=a[d];if(d==="hour"&&o==="H")return u.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(o)&&u.length===1)return`0${u}`;if(d==="dayPeriod"){const p=F(c.getUTCHours()<12?"am":"pm",r);return o==="A"?p.toUpperCase():p.toLowerCase()}return d==="timeZoneName"?n??pe(-1*c.getTimezoneOffset(),o):u}return t.map(d=>({...d,value:f(d)}))}function _t(e,t,r,s=!1){const n=C(e),a=t.filter(o=>o.hour12),c=t.filter(o=>!o.hour12),f=[],d=[];function v(o,u=!1){const p=`${r}-u-hc-${u?"h12":"h23"}`;if(f.push(...new Intl.DateTimeFormat(p,o.reduce((l,i)=>i.partName==="literal"?l:(s&&vt.includes(i.token)&&d.push(i),Object.assign(l,i.option)),{timeZone:"UTC"})).formatToParts(n).map(Z)),s&&d.length)for(const l of d){let i=[];switch(l.token){case"MMMM":i=new Intl.DateTimeFormat(p,{dateStyle:"long",timeZone:"UTC"}).formatToParts(n).map(Z);break;case"MMM":i=new Intl.DateTimeFormat(p,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(n).map(Z);break}const M=i.find(_=>_.type===l.partName),w=f.findIndex(_=>_.type===l.partName);M&&w>-1&&(f[w]=M)}}return a.length&&v(a,!0),c.length&&v(c),f.reduce((o,u)=>(o[u.type]=u.value,o),{})}function pe(e,t="Z"){const r=String(Math.floor(Math.abs(e/60))).padStart(2,"0"),s=String(Math.abs(e%60)).padStart(2,"0"),n=e<0?"-":"+";return t==="ZZ"?`${n}${r}${s}`:`${n}${r}:${s}`}function wt(e,t){_e(e,t);const[r,s,n,a]=e.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),c=Number(n)*60+Number(a);return s==="+"?c:-c}function _e(e,t="Z"){if(!(s=>{switch(s){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(e);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(e)}})(t))throw new Error(`Invalid offset: ${e}`);return e}function yt(e){return O.concat(K).concat(J).sort((t,r)=>t[0].length>r[0].length?1:-1).reduce((t,r)=>t.replace(r[0],`\\${r[0]}`),e)}function Mt(e){return["numeric","2-digit"].includes(e.partValue)}function $t(e){let t;for(const r of e){if(r.partName==="literal"&&!isNaN(parseFloat(r.partValue)))throw new Error(`Numbers in format (${r.partValue}).`);if(t&&t.partName!=="literal"&&r.partName!=="literal"&&!(t.token in R)&&!(r.token in R)&&!(Mt(t)&&r.token.toLowerCase()==="a"))throw new Error(`Illegal adjacent tokens (${t.token}, ${r.token})`);t=r}return e}function bt(e){return typeof e=="string"?e.includes("ZZ")?"ZZ":"Z":"time"in e&&e.time==="full"?"Z":"ZZ"}function F(e,t){const r=oe.get(t);if(r&&r[e])return r[e];const s=new Date(z);s.setUTCHours(e==="am"?5:20);const a=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(s).map(Z).find(c=>c.type==="dayPeriod");if(a){const c=r||{};return oe.set(t,Object.assign(c,{[e]:a.value})),a.value}return e}function Dt(e,t="+00:00"){const r=C(e),s=(()=>{switch(ge(t)){case 5:return"ZZ";case 6:return"Z"}})(),n=wt(t,s);return new Date(r.getTime()+n*1e3*60)}function we(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function ie(e,t){const r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hourCycle:"h23"}).formatToParts(e).map(Z),s={};return r.forEach(n=>{s[n.type]=n.value}),new Date(`${s.year}-${s.month}-${s.day}T${s.hour}:${s.minute}:${s.second}Z`)}function le(e,t="UTC",r="device",s="Z"){var n;r=r==="device"?(n=we())!=null?n:"utc":r;const a=C(e),c=ie(a,t),f=ie(a,r),d=Math.round((f.getTime()-c.getTime())/1e3/60);return pe(d,s)}function Q(e,t){if(ve.includes(e)||typeof e=="object")return Tt(e,t);let r=e,s=0;const n=o=>{if(o[2]||(o[2]=new RegExp(`(.)?(${o[0]})`,"g")),o[2].test(r)){let u=0;return r=r.replace(o[2],(p,l,i)=>l==="\\"?i:`${typeof l=="string"?l:""}{!${u++?s:s++}!}`),!!u}return!1};function a(o){const u=o.map(l=>l.partName),p=new Set(u);if(u.length>p.size)throw new Error("Cannot reuse format tokens.");return o}function c(o,[u,p,l]){const i=Object.keys(p)[0],M=p[i];return{option:p,partName:i,partValue:M,token:u,pattern:l,hour12:o}}const f=O.filter(n).concat(K.filter(n)).map(c.bind(null,!1)),d=a(f.concat(J.filter(n).map(c.bind(null,!0)))),v=/^\{!(\d+)!\}$/;return r.split(/(\{!\d+!\})/).map(o=>{const u=o.match(v);return u?d[Number(u[1])]:{option:{literal:o},partName:"literal",partValue:o,token:o,pattern:new RegExp(""),hour12:!1}}).filter(o=>!(o.partName==="literal"&&o.partValue===""))}function Tt(e,t){const r={timeZone:"UTC"};typeof e=="string"?r.dateStyle=e:("date"in e&&(r.dateStyle=e.date),"time"in e&&(r.timeStyle=e.time));const s=new Intl.DateTimeFormat(t,r),n=s.formatToParts(new Date(z)).map(Z),c=s.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(Z).find(d=>d.type==="hour"),f=c&&c.value==="23"?24:12;return n.map(d=>{const v=d.type,o=St(d.type,d.value,t,d.type==="hour"?f:void 0,r);if(o===void 0)return;const u=o[1][v];if(u)return o[2]||(o[2]=new RegExp(`${o[0]}`,"g")),{option:{[v]:u},partName:v,partValue:u,token:o[0],pattern:o[2],hour12:f===12}}).filter(d=>!!d)}function St(e,t,r,s,n){const a=t.length,c=!isNaN(Number(t));let f;switch(e){case"year":return a===2?y.get("YY"):y.get("YYYY");case"month":if(c)return a===1?y.get("M"):y.get("MM");switch(f=ue(r,e,t),f){case"long":return y.get("MMMM");default:return y.get("MMM")}case"day":return a===1?y.get("D"):y.get("DD");case"weekday":switch(f=ue(r,e,t),f){case"narrow":return y.get("d");case"short":return y.get("ddd");default:return y.get("dddd")}case"hour":return s===12?a===1?y.get("h"):y.get("hh"):a===1?y.get("H"):y.get("HH");case"minute":return a===1?y.get("m"):y.get("mm");case"second":return a===1?y.get("s"):y.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?y.get("A"):y.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":return n.timeStyle==="full"?y.get("Z"):y.get("ZZ");default:return}}function ue(e,t,r){if(!q.has(e)){const n=new Date(z),a=[3,8,9,7,6,4,3],c=["weekday","month","dayPeriod"],f=["long","short","narrow"],d={};for(let v=0;v<12;v++){n.setMonth(0+v),v in a&&n.setDate(a[v]),n.setUTCHours(8+v);for(const o of f){const u=new Intl.DateTimeFormat(e,c.reduce((p,l)=>Object.assign(p,{[l]:o}),{hour12:!0,timeZone:"UTC"})).formatToParts(n).map(Z);if(o==="long"||o==="short"){const l=new Intl.DateTimeFormat(e,{dateStyle:o==="short"?"medium":"long",timeZone:"UTC"}).formatToParts(n).map(Z).find(M=>M.type==="month"),i=u.findIndex(M=>M.type==="month");i>-1&&l&&(u[i]=l)}u.forEach(p=>{if(p.type==="literal")return;const l=p.type;d[l]=Object.assign(d[l]||{},{[p.value]:o})})}}q.set(e,d)}const s=q.get(e);return s?s[t][r]:void 0}function xt(e,t="+00:00"){const r=t.slice(0,1)==="+";return Dt(e,t.replace(r?"+":"-",r?"-":"+"))}function kt(){return Intl.DateTimeFormat().resolvedOptions().locale}function P(e,t="long",r="device",s=!1,n){let a,c;return typeof e=="object"&&!(e instanceof Date)&&({date:e,format:t,locale:r,genitive:s,partFilter:n,tz:a}=e),t==="ISO8601"?C(e).toISOString():(a&&(c=le(e,"utc",a,bt(t))),a??(a=we()),(a==null?void 0:a.toLowerCase())!=="utc"&&(e=xt(e,le(e,a,"utc"))),(!r||r==="device")&&(r=kt()),pt(e,Q(t,r).filter(n??(()=>!0)),r,s,c).map(f=>f.value).join(""))}function Nt(e,t="en",r=!1,s=()=>!0){return Q(e,t).filter(s).reduce((n,a)=>n+=r&&a.partName==="literal"?yt(a.token):a.token,"").normalize("NFKC")}function Zt(e){const t=new Date().getFullYear(),r=t%100,s=Math.floor(t/100),n=Number(e);return(s+(n>r+20?-1:0))*100+n}function ye(e,t="en",r=!1){const s=(n,a)=>Array(n).fill("").map((c,f)=>`${a(f)}`);if(e==="M")return s(12,n=>n+1);if(e==="MM")return s(12,n=>{const a=n+1;return a<10?`0${a}`:a});if(e.startsWith("M"))return ye("MM").map(n=>P(`2000-${n}-05`,e,t,r));if(e.startsWith("d"))return s(7,n=>`0${n+2}`).map(n=>P(`2022-10-${n}`,e,t));if(e==="a")return[F("am",t).toLowerCase(),F("pm",t).toLowerCase()];if(e==="A")return[F("am",t).toUpperCase(),F("pm",t).toUpperCase()];if(e.startsWith("Y")){const n=new Date().getFullYear();return s(120,a=>a+1).reduce((a,c)=>(c!=="120"&&a.push(P(`${n+Number(c)}-06-06`,e,t)),a.unshift(P(`${n-Number(c)}-06-06`,e,t)),a),[P(`${n}-06-06`,e,t)])}return e.startsWith("D")?s(31,n=>`${e==="DD"&&n<9?"0":""}${n+1}`):e.startsWith("H")?s(24,n=>`${e==="HH"&&n<10?"0":""}${n}`):e.startsWith("h")?s(12,n=>`${e==="hh"&&n<9?"0":""}${n+1}`):e.startsWith("m")||e.startsWith("s")?s(60,n=>`${e.length>1&&n<10?"0":""}${n}`):[]}function Yt(e,t="ISO8601",r="device"){let s=()=>!0,n,a="backward";if(typeof e=="object"?{date:n,format:t="ISO8601",locale:r="device",dateOverflow:a="backward",partFilter:s=()=>!0}=e:n=e,!n)throw new Error("parse() requires a date string.");const c=()=>{throw new Error(`Date (${n}) does not match format (${Nt(t,r)})`)};if(t==="ISO8601")return C(n);const f=ve.includes(t)||typeof t=="object",d=$t(Q(t,r).filter(s));if(!d.length)throw new Error("parse() requires a pattern.");let v;try{v=Ct(n,d)}catch{return c()}const o=new Date,u=new Map([["YYYY",o.getFullYear()],["MM",o.getMonth()+1],["DD",o.getDate()],["HH",0],["mm",0],["ss",0]]);let p=null,l="";v.forEach(T=>{if(T.partName==="literal")return;if(T.token===T.value)return c();const E=Number(T.value);if(u.has(T.token))u.set(T.token,E);else if(T.token==="YY")u.set("YYYY",Zt(T.value));else{const S=T.token;if(S.startsWith("d"))return;if(S==="D")u.set("DD",E);else if(S==="H"||S.startsWith("h"))u.set("HH",E);else if(S==="M")u.set("MM",E);else if(S==="a"||S==="A")p=T.value.toLowerCase()===F("am",r).toLowerCase();else if(S==="Z"||S==="ZZ")l=_e(T.value,S);else{const ee=ye(S,r,f).indexOf(T.value);if(ee!==-1)switch(S){case"MMM":case"MMMM":u.set("MM",ee+1);break}}}});let i=u.get("HH")||0;p===!1?(i+=i===12?0:12,u.set("HH",i===24?0:i)):p===!0&&i===12&&u.set("HH",0),u.set("MM",(u.get("MM")||1)-1);let[M,w,_,b,U,Me]=Array.from(u.values());const G=gt(new Date(`${B(M)}-${Y(w+1)}-10`));if(G<_&&a==="throw")throw new Error(`Invalid date ${B(M)}-${Y(w+1)}-${Y(_)}`);_=a==="backward"?Math.min(_,G):_;const $e=`${B(M)}-${Y(w+1)}-${Y(_)}T${Y(b)}:${Y(U)}:${Y(Me)}${l}`,X=new Date($e);return isFinite(+X)?X:c()}function Ct(e,t){let r=0;const s=f=>[f[r++],f[r]];let n=0;const a=[];let c;do{const[f,d]=s(t);c=d;let v=1;if(f.partName==="literal")v=f.partValue.length;else if(f.partName==="timeZoneName")v=ge(e.substring(n));else if(f.token in R)v=R[f.token];else if(d)if(d.partName==="literal"){if(v=e.indexOf(d.partValue,n)-n,v<0)throw new Error}else if(d.partName==="dayPeriod"){for(let o=1;o<=4;o++)if(isNaN(Number(e.charAt(n+o)))){v=o;break}}else{const o=e.substring(n).search(/\d/);o!==-1&&(v=n+o)}else v=e.length;a.push({...f,value:e.substring(n,n+v)}),n+=v}while(c);return a}const Pt=(e,t="YYYY/MM/DD")=>{if(e)return P(Yt(e,"YYYY-MM-DDTHH:mm:ss"),t)},Ft={class:"flex w-full flex-col items-center gap-4"},It={class:"text-2xl font-bold"},Ht={class:"text-xl font-bold"},Et={class:"text-xs text-muted-foreground"},At={class:"text-xs text-muted-foreground"},Lt={class:"relative overflow-y-auto p-4"},Xt=ce({__name:"SellersRaffleView",setup(e){const t=Ae(),r=k(),s=k([]),n=k([]),a=k(""),c=k(!0),f=k(!1),d=t.currentRoute.value.params.id,v=async()=>{await Le.from("raffle_stats").select("*").eq("raffle_id",d).single().then(l=>{r.value=l.data})},o=async()=>{c.value=!0,me().then(l=>{s.value=l}).catch(l=>{console.error(l)}).finally(()=>{c.value=!1})},u=async()=>{c.value=!0,We(Number(d)).then(l=>{n.value=l}).catch(l=>{console.error(l)}).finally(()=>{c.value=!1})},p=async()=>{f.value=!1,await u()};return fe(async()=>{var l;await v(),await o(),await u(),a.value=Pt((l=r.value)==null?void 0:l.draw_drawn_at)}),(l,i)=>{const M=de("RouterLink");return D(),x("div",Ft,[h(m(Ve),{class:"w-full"},{default:g(()=>[h(m(Re),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:g(()=>[h(m(Ue),{class:"text-lg font-medium"},{default:g(()=>{var w,_;return[$("p",It,N((w=r.value)==null?void 0:w.raffle_name),1),$("p",null,"Juega con: "+N((_=r.value)==null?void 0:_.draw_name)+" - ("+N(a.value)+")",1)]}),_:1}),h(m(Xe),{class:"h-6 w-6"})]),_:1}),h(m(je),null,{default:g(()=>{var w,_,b;return[$("div",Ht,N((w=r.value)==null?void 0:w.total_tickets)+" boletas",1),$("p",Et,N((_=r.value)==null?void 0:_.available_tickets)+" Disponibles",1),$("p",At,N((b=r.value)==null?void 0:b.taken_tickets)+" asignadas",1)]}),_:1})]),_:1}),h(be,{sellers:n.value,isLoading:c.value,"sort-by":(w,_)=>(_.total_tickets||0)-(w.total_tickets||0)},{actionButton:g(()=>[h(m(De),{open:f.value,"onUpdate:open":i[1]||(i[1]=w=>f.value=w)},{default:g(()=>[h(m(Ne),{"as-child":""},{default:g(()=>[h(m(I),{class:"gap-2"},{default:g(()=>[h(m(L),{class:"h-5 w-5"}),i[3]||(i[3]=$("span",{class:"hidden md:inline"},"Agregar",-1))]),_:1})]),_:1}),h(m(Te),{class:"max-h-[calc(100dvh-2rem)] w-[calc(100vw-2rem)] max-w-2xl grid-rows-[auto_minmax(0,1fr)_auto] gap-0 rounded-lg p-0 transition-[opacity,_transform]"},{default:g(()=>[h(m(Se),{class:"border-b p-4"},{default:g(()=>[h(m(xe),null,{default:g(()=>i[4]||(i[4]=[H("Agregar vendedor")])),_:1}),h(m(ke),{class:"mt-4"})]),_:1}),$("div",Lt,[h(lt,{"raffle-id":Number(m(d)),onCancel:i[0]||(i[0]=()=>f.value=!1),onSuccess:p},null,8,["raffle-id"])])]),_:1})]),_:1},8,["open"])]),emptyText:g(()=>i[5]||(i[5]=[$("p",null,"No hay vendedores en esta rifa",-1)])),actionForEmpty:g(()=>[h(m(I),{class:"gap-2",onClick:i[2]||(i[2]=w=>f.value=!0)},{default:g(()=>[h(m(L),{class:"h-5 w-5"}),i[6]||(i[6]=$("span",null,"Agregar venddor a esta rifa",-1))]),_:1})]),itemAction:g(({seller:w})=>[h(M,{custom:"",to:{name:"raffle-seller",params:{id:m(d),seller_id:w.id}}},{default:g(({navigate:_})=>[h(m(I),{class:"gap-2",type:"button",variant:"outline",onClick:_},{default:g(()=>[h(m(ft),{class:"h-6 w-6"})]),_:2},1032,["onClick"])]),_:2},1032,["to"])]),_:1},8,["sellers","isLoading","sort-by"])])}}});export{Xt as default};
