import{c as j,b as T}from"./sellers-Bpang5IU.js";import{_ as A}from"./SellersList.vue_vue_type_script_setup_true_lang-CbIWCxmG.js";import{S as D,_ as z,a as H,b as R,c as W,d as Z}from"./AlertDialogDescription.vue_vue_type_script_setup_true_lang-CQNV5l5t.js";import{c as G,_ as K}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-DS1uNNmS.js";import{d as X,a9 as Y,o as n,j as N,e,ab as J,n as O,C as Q,r as b,l as ee,q as I,S as le,c as f,a as y,b as l,w as a,P as g,B as F,U as v,t as ae,N as se,_ as E,V as oe,W as te}from"./index-YeJzIK-I.js";import{t as ne,z as h,u as ie,_ as x,a as $,b as w,c as S,F as C}from"./vee-validate-zod.esm-BMlYSBh7.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-ChwoFacC.js";import{u as re,_ as ue}from"./ImageInput.vue_vue_type_script_setup_true_lang-Dem9DFtP.js";import"./magnifer-outline-O1s8yx5g.js";import"./strings-BzWVocVB.js";import"./thumbHash-Ci89Ad7b.js";const de=X({__name:"PhoneInput",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(V,{emit:p}){const c=V,d=Y(c,"modelValue",p,{passive:!0,defaultValue:c.defaultValue});return(r,t)=>(n(),N(e(G),{unmasked:e(d),"onUpdate:unmasked":t[0]||(t[0]=u=>J(d)?d.value=u:null),type:"text",mask:"000-000-00-00",placeholder:"3XX-XXX-XX-XX",class:O(e(Q)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-right text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c.class)),inputmode:"numeric"},null,8,["unmasked","class"]))}}),ce=["disabled"],me={style:{position:"relative"}},fe={key:0,role:"alert",id:"radix-136-form-item-message",class:"text-sm font-medium text-destructive",type:"error"},_e=y("span",null,"Cancelar",-1),pe=y("span",null,"Crear",-1),ve=1,he=5e6,ge=X({__name:"SellerForm",emits:["submit","cancel","success","error"],setup(V,{emit:p}){const c=["image/jpeg","image/jpg","image/png","image/webp"],i=p,d=b(!1),r=ee(()=>d.value),t=b(null),u=b(null),M=ne(h.object({name:h.string({required_error:"El nombre es requerido"}).transform(s=>s.toLocaleLowerCase()),email:h.string().email({message:"Email invalido"}).optional().or(h.literal("")),phone:h.string({required_error:"El teléfono es requerido"}).refine(s=>s.length===10,{message:"El teléfono debe tener 10 dígitos"}),photo:h.instanceof(File).refine(s=>s instanceof File,{message:"Debe seleccionar una imagen"}).refine(s=>c.includes(s.type),{message:"Tipo de archivo no aceptado"}).refine(s=>s.size>=ve,{message:"El archivo está vacío"}).refine(s=>s.size<=he,{message:"El archivo es demasiado grande"}).optional()})),{handleSubmit:B}=ie({validationSchema:M,initialValues:{}}),P=()=>{i("cancel")},L=B(async s=>{i("submit"),console.log(s),d.value=!0;const _={name:s.name,email:s.email||null,phone:s.phone,avatar_url:null,thumb_hash:null};s.photo&&await re(s.photo,s.photo.name,"avatars").then(o=>{console.log(o),_.avatar_url=o==null?void 0:o.fullPath,_.thumb_hash=t.value}).catch(o=>{console.error(o)}),j(_).then(o=>{i("success"),console.log(o)}).catch(o=>{i("error"),console.error(o),u.value=o.message}).finally(()=>{d.value=!1})},({errors:s})=>{console.log(s)});return I(async()=>{}),(s,_)=>{const o=le("auto-animate");return n(),f("form",{onSubmit:_[1]||(_[1]=te((...m)=>e(L)&&e(L)(...m),["prevent"]))},[y("fieldset",{disabled:r.value},[l(e(C),{name:"name"},{default:a(({componentField:m})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("Nombre")]),_:1}),l(e(w),null,{default:a(()=>[l(e(q),F({type:"text",placeholder:"Nombre del vendedor"},m,{required:""}),null,16)]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),l(e(C),{name:"email"},{default:a(({componentField:m})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("E-mail")]),_:1}),l(e(w),null,{default:a(()=>[l(e(q),F({type:"email",placeholder:"mail@example.com"},m),null,16)]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),l(e(C),{name:"phone"},{default:a(({value:m,handleChange:k})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("Numero de contacto")]),_:1}),l(e(w),null,{default:a(()=>[l(de,{"model-value":m,"onUpdate:modelValue":U=>k(U,!0),required:""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),l(e(C),{name:"photo"},{default:a(({componentField:m})=>[l(e(x),null,{default:a(()=>[l(e($),null,{default:a(()=>[g("Foto de perfil")]),_:1}),l(e(w),null,{default:a(()=>[l(ue,F(m,{base64ThumbHash:t.value,"onUpdate:base64ThumbHash":_[0]||(_[0]=k=>t.value=k)}),null,16,["base64ThumbHash"])]),_:2},1024),v((n(),f("div",null,[l(e(S))])),[[o]])]),_:2},1024)]),_:1}),v((n(),f("div",me,[u.value!==null?(n(),f("p",fe,ae(u.value),1)):se("",!0)])),[[o]]),l(e(x),{class:"flex w-full flex-col-reverse items-center justify-end gap-2 space-y-0 py-2 md:flex-row"},{default:a(()=>[l(e(E),{type:"button",class:"w-full gap-2",variant:"outline",onClick:P},{default:a(()=>[_e]),_:1}),l(e(E),{type:"submit",class:"w-full gap-2"},{default:a(()=>[v((n(),f("div",null,[d.value?(n(),N(e(oe),{key:0,class:"h-6 w-6"})):(n(),N(e(D),{key:1,class:"h-6 w-6"}))])),[[o]]),pe]),_:1})]),_:1})],8,ce)],32)}}}),be={class:"flex w-full flex-col items-center"},ye=y("span",{class:"hidden md:inline"},"Nuevo vendedor",-1),xe={class:"grid gap-4 py-4"},$e=y("span",null,"Crear vendedor",-1),Te=X({__name:"SellersView",setup(V){const p=b(!1),c=b([]),i=b(!1),d=()=>{i.value=!1,T().then(r=>{c.value=r}).catch(r=>{console.log(r)})};return I(async()=>{p.value=!0,T().then(r=>{c.value=r}).catch(r=>{console.log(r)}).finally(()=>{p.value=!1})}),(r,t)=>(n(),f("div",be,[l(A,{sellers:c.value,isLoading:p.value},{actionButton:a(()=>[l(e(z),{open:i.value,"onUpdate:open":t[2]||(t[2]=u=>i.value=u)},{default:a(()=>[l(e(K),{"as-child":""},{default:a(()=>[l(e(E),{class:"gap-2"},{default:a(()=>[l(e(D),{class:"h-5 w-5"}),ye]),_:1})]),_:1}),l(e(H),{onEscapeKeyDown:t[1]||(t[1]=u=>u.preventDefault())},{default:a(()=>[l(e(R),null,{default:a(()=>[l(e(W),null,{default:a(()=>[g("Crear nuevo vendedor")]),_:1}),l(e(Z),null,{default:a(()=>[g(" Crea un nuevo vendedor ")]),_:1})]),_:1}),y("div",xe,[l(ge,{onSuccess:d,onCancel:t[0]||(t[0]=u=>i.value=!1)})])]),_:1})]),_:1},8,["open"])]),actionForEmpty:a(()=>[l(e(E),{class:"gap-2",onClick:t[3]||(t[3]=u=>i.value=!0)},{default:a(()=>[l(e(D),{class:"h-5 w-5"}),$e]),_:1})]),_:1},8,["sellers","isLoading"])]))}});export{Te as default};
