import{d as b,x as M,o as n,j as x,w as d,v as y,y as R,z as E,e,A as W,l as V,I as Y,B as A,C as z,D as Z,E as ee,G as te,H as X,b as i,J as se,a as u,K as ae,L as le,c as v,n as F,M as oe,r as _,q as J,t as k,N as O,F as S,i as L,O as ne,p as re,P as B,_ as U,Q as ie}from"./index-BXzmiJAW.js";import{_ as de}from"./Skeleton.vue_vue_type_script_setup_true_lang-BuVb2ppF.js";import{c as ue,a as ce}from"./createLucideIcon-DK_UZ_7u.js";import{g as pe}from"./tickets-CQ7fzf_D.js";import{_ as fe}from"./Input.vue_vue_type_script_setup_true_lang-BwHJgXie.js";import{S as me}from"./ticket-line-duotone-tKQNDIDU.js";import{S as ve}from"./magnifer-outline-D7LJpAaO.js";const ge=ue("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_e=b({__name:"Tabs",props:{defaultValue:{},orientation:{},dir:{},activationMode:{},modelValue:{},asChild:{type:Boolean},as:{}},emits:["update:modelValue"],setup(c,{emit:o}){const f=M(c,o);return(l,r)=>(n(),x(e(W),R(E(e(f))),{default:d(()=>[y(l.$slots,"default")]),_:3},16))}}),j=b({__name:"TabsTrigger",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(c){const o=c,p=V(()=>{const{class:f,...l}=o;return l}),t=Y(p);return(f,l)=>(n(),x(e(Z),A(e(t),{class:e(z)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",o.class)}),{default:d(()=>[y(f.$slots,"default")]),_:3},16,["class"]))}}),be=b({__name:"TabsList",props:{loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(c){const o=c,p=V(()=>{const{class:t,...f}=o;return f});return(t,f)=>(n(),x(e(ee),A(p.value,{class:e(z)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",o.class)}),{default:d(()=>[y(t.$slots,"default")]),_:3},16,["class"]))}}),xe=b({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(c,{emit:o}){const f=M(c,o);return(l,r)=>(n(),x(e(te),R(E(e(f))),{default:d(()=>[y(l.$slots,"default")]),_:3},16))}}),ye=b({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(c){const o=c;return(p,t)=>(n(),x(e(X),R(E(o)),{default:d(()=>[y(p.$slots,"default")]),_:3},16))}}),we=b({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(c,{emit:o}){const p=c,t=o,f=V(()=>{const{class:r,...g}=p;return g}),l=M(f,t);return(r,g)=>(n(),x(e(le),null,{default:d(()=>[i(e(se),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),i(e(ae),A(e(l),{class:e(z)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",p.class)}),{default:d(()=>[y(r.$slots,"default"),i(e(X),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:d(()=>[i(e(ge),{class:"w-4 h-4"}),g[0]||(g[0]=u("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),ke=b({__name:"DialogFooter",props:{class:{}},setup(c){const o=c;return(p,t)=>(n(),v("div",{class:F(e(z)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",o.class))},[y(p.$slots,"default")],2))}}),he={class:"w-full @container/ticketInfo"},$e={class:"relative flex w-full flex-col gap-2 overflow-hidden @md/ticketInfo:flex-row @md/ticketInfo:gap-8"},Be={class:"min-w-auto flex flex-col items-center justify-center"},Ce={class:"flex h-28 w-28 flex-col items-center justify-center rounded-full border bg-background-elevated"},Ie={class:"text-3xl"},Te={class:"flex min-w-0 flex-col gap-2"},De={key:0,class:"capitalize"},Ne={key:1,class:"text-sm"},Oe={key:2,class:"text-sm"},Ve={key:3,class:"text-sm"},ze={key:4,class:"flex w-full flex-col gap-2"},Pe={class:"flex flex-row gap-2 overflow-x-auto rounded-md border p-2"},je=b({__name:"TicketInfo",props:{ticketId:{}},setup(c){const o=oe.from("tickets").select("*, sellers(*, tickets(*))"),p=c,t=_(),f=async()=>{const{data:l,error:r}=await o.eq("id",p.ticketId).single();return r&&console.error(r),console.log(l),l};return J(async()=>{await f().then(l=>t.value=l).catch(l=>console.error(l)).finally(()=>{})}),(l,r)=>{var g,h,w,$,C,I,T,D,N,s,a,m,P,q,G,H,K;return n(),v("div",he,[u("div",$e,[u("div",Be,[u("div",Ce,[u("span",Ie,k((g=t.value)==null?void 0:g.number),1)])]),u("div",Te,[r[2]||(r[2]=u("h2",{class:"my-2 text-2xl"},"Información del boleto",-1)),(h=t.value)!=null&&h.sellers?(n(),v("p",De," Vendedor: "+k(($=(w=t.value)==null?void 0:w.sellers)==null?void 0:$.name),1)):(n(),v("p",Ne,"El Boleto no tiene un vendedor asignado")),(I=(C=t.value)==null?void 0:C.sellers)!=null&&I.email?(n(),v("p",Oe," Email: "+k((D=(T=t.value)==null?void 0:T.sellers)==null?void 0:D.email),1)):O("",!0),(s=(N=t.value)==null?void 0:N.sellers)!=null&&s.phone?(n(),v("p",Ve," Telefono: "+k((m=(a=t.value)==null?void 0:a.sellers)==null?void 0:m.phone),1)):O("",!0),(P=t.value)!=null&&P.sellers&&((G=(q=t.value)==null?void 0:q.sellers)!=null&&G.tickets)?(n(),v("div",ze,[r[0]||(r[0]=u("hr",{class:""},null,-1)),r[1]||(r[1]=u("label",{class:""},"Otros boletos del vendedor:",-1)),u("div",Pe,[(n(!0),v(S,null,L((K=(H=t.value)==null?void 0:H.sellers)==null?void 0:K.tickets,Q=>(n(),v("div",{key:Q.id,class:"flex h-12 min-h-12 w-12 min-w-12 flex-col items-center justify-center rounded-full border bg-background-elevated"},[u("span",null,k(Q.number),1)]))),128))])])):O("",!0)])])])}}}),Fe={class:"flex w-full flex-col items-center"},Se={class:"flex w-full max-w-3xl flex-col gap-4"},Le={class:"relative grow"},Me={class:"flex w-full flex-col items-stretch gap-0"},Re={className:"bg-secondary/50 border border-b-0 rounded-t-lg py-2 px-4 flex flex-row items-center justify-between"},Ee={key:0,className:"p-2 border rounded-b-lg grid grid-cols-5 @xl:grid-cols-10 gap-x-2 gap-y-2 place-items-center"},Ae={className:"p-2 border rounded-b-lg grid grid-cols-5 @xl:grid-cols-10 gap-x-2 gap-y-2 place-items-center"},Je=b({__name:"RaffleView",setup(c){const o=ne(),p=_(),t=_([]),f=_(null),l=_("all"),r=_(""),g=_(!1),h=_(!1),w=_(!1),$=_(null),C=_(null),I=V(()=>t.value.filter(s=>D(s)&&T(s))),T=s=>r.value.trim()===""||s.number.toLowerCase().includes(r.value.toLowerCase()),D=s=>{switch(l.value){case"available":return s.seller_id===null;case"unavailable":return s.seller_id!==null;default:return!0}},N=s=>{f.value=s,ie(()=>{w.value=!0})};return re($,([{isIntersecting:s}])=>{h.value=!s},{rootMargin:"-65px",threshold:1}),J(async()=>{g.value=!0,await ce(Number(o.currentRoute.value.params.id)).then(s=>{p.value=s}).catch(s=>{console.log(s)}),await pe(Number(o.currentRoute.value.params.id)).then(s=>{t.value=s}).catch(s=>{console.log(s)}).finally(()=>{g.value=!1})}),(s,a)=>(n(),v("div",Fe,[u("div",{ref_key:"sentinal",ref:$,class:"h-0 w-full"},null,512),u("div",Se,[u("div",{class:F(["sticky top-16 z-10 flex flex-col gap-4 rounded-lg border bg-background-elevated/90 px-4 py-3 backdrop-blur transition-all duration-300 sm:flex-row",{"-mx-4 rounded-none border-x-0 border-t-0 !bg-background/90 @3xl/main:rounded-b-lg @3xl/main:border-x @3xl/main:!bg-background-elevated/90":h.value}])},[u("div",Le,[i(e(ve),{class:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2"}),i(e(fe),{type:"text",inputmode:"numeric",autocomplete:"off",maxlength:"19",placeholder:"Buscar número",class:"w-full py-2 pl-11 pr-4 text-sm",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=m=>r.value=m)},null,8,["modelValue"])]),i(e(_e),{"default-value":"all",class:"w-full sm:w-auto"},{default:d(()=>[i(e(be),{class:"w-full"},{default:d(()=>[i(e(j),{value:"all",onClick:a[1]||(a[1]=()=>l.value="all")},{default:d(()=>a[5]||(a[5]=[B(" Todo ")])),_:1}),i(e(j),{value:"available",onClick:a[2]||(a[2]=()=>l.value="available")},{default:d(()=>a[6]||(a[6]=[B(" Disponibles ")])),_:1}),i(e(j),{value:"unavailable",onClick:a[3]||(a[3]=()=>l.value="unavailable")},{default:d(()=>a[7]||(a[7]=[B(" No disponibles ")])),_:1})]),_:1})]),_:1})],2),u("div",Me,[u("div",Re,[a[8]||(a[8]=u("h2",{className:"text-3xl py-2 "},"Numeración disponible",-1)),i(e(me),{class:"h-8 w-8"})]),g.value?(n(),v("div",Ee,[(n(),v(S,null,L(100,m=>i(e(de),{key:m,class:"h-14 w-14 rounded-full border"})),64))])):O("",!0),u("div",Ae,[(n(!0),v(S,null,L(I.value,m=>(n(),x(e(U),{key:m.id,variant:"ghost",class:F(["h-14 w-14 rounded-full border text-lg",{"border border-destructive bg-background-elevated":m.seller_id!==null}]),onClick:P=>N(m)},{default:d(()=>[B(k(m.number),1)]),_:2},1032,["class","onClick"]))),128))])])]),i(e(xe),{ref_key:"overviewDialog",ref:C,open:w.value,"onUpdate:open":a[4]||(a[4]=m=>w.value=m)},{default:d(()=>[i(e(we),{class:"max-h-[calc(100dvh-2rem)] w-[calc(100vw-2rem)] max-w-2xl grid-rows-[auto_minmax(0,1fr)_auto] gap-0 rounded-lg p-0 transition-[opacity,_transform]"},{default:d(()=>{var m;return[i(je,{class:"p-6",ticketId:(m=f.value)==null?void 0:m.id},null,8,["ticketId"]),i(e(ke),{class:"p-6 pt-0"},{default:d(()=>[i(e(ye),{"as-child":""},{default:d(()=>[i(e(U),{type:"button",variant:"secondary"},{default:d(()=>a[9]||(a[9]=[B(" Cerrar ")])),_:1})]),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]))}});export{Je as default};
